<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Page 18 | klion26</title>
  <meta name="author" content="klion26">
  
  <meta name="description" content="个人博客，记录自己成长的点点滴滴">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="klion26"/>

  
    <meta property="og:image" content="undefined"/>
  

  
    <link rel="alternative" href="/atom.xml" title="klion26" type="application/atom+xml">
  
  
    <link href="/favicon.png" rel="icon">
  

  <!-- CSS -->
  <link rel="stylesheet" href="/css/themes/bootstrap.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>

  <!-- analytics -->
  



</head>

 <body>  
  <nav id="main-nav" class="navbar navbar-inverse navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
	<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
       <a class="navbar-brand" href="/">klion26</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/archives" title="All the articles.">
			  <i class="fa fa-archive"></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/categories" title="All the categories.">
			  <i class="fa fa-folder"></i>Categories
			</a>
		  </li>
		  
		  <li>
			<a href="/tags" title="All the tags.">
			  <i class="fa fa-tags"></i>Tags
			</a>
		  </li>
		  
		  <li>
			<a href="/resume" title="Resume">
			  <i class=""></i>Resume
			</a>
		  </li>
		  
		  <li>
			<a href="/about" title="About me.">
			  <i class="fa fa-user"></i>About
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 <div class="page-header page-header-inverse ">
  <h1 class="title title-inverse ">klion26</h1>
</div>

<div class="row page">

	
	<div class="col-md-9">
	

		<div class="slogan">
      <i class="fa fa-heart"></i>
      做中学, 学中做
</div>    
		<div id="top_search"></div>
		<div class="mypage">
		
		<!-- title and entry -->
        <!-- render top articles firstly -->
        
        <!-- render other articles -->
        
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2011-02-21 </div>
			<div class="article-title"><a href="/2011/02/21/usaco-4-2-4-cowcycle/" >usaco 4.2.4 cowcycle</a></div>						
		</h3>
	


			  <div class="entry">
  <div class="row">
	
	
		<p>这题数据不是很BT,用简单的dfs就可以过,不过还是有几点要注意的.我就是死在其中的某点上.<br>1.我一开始自作聪明的加了个剪枝,可是结果是越剪时间用的越多,我的剪枝方法是,确定前轮之后[我先确定前轮,因为我觉得这样比先确定后轮时间要少一点]然后再用那个3倍关系确定后轮的范围,这样时间用的更多.真是画蛇添足了<br>2.我用的排序时qsort,由于一直用c写acm的代码,排序基本是qsort,一般是没问题的,可是这次就死在这里.后来自己写的冒泡就过了,才知道qsort其实不是非常快,尤其是小数据的时候.<br>其他的应该只要读懂题意,然后照着题目的要求算方差就OK了,千万别搞错了differences的个数<br>代码如下:</p>
<div class="source" style="color: #f5deb3; font-family: 'Courier New','Lucida Console','monospace'; background-color: #2f4f4f;"><span style="color: #da70d6;">/<em></em></span><br><span style="color: #da70d6;">  ID:qcx97811</span><br><span style="color: #da70d6;">  LANG:C</span><br><span style="color: #da70d6;">  TASK:cowcycle</span><br><span style="color: #da70d6;">/</span><br><span style="color: #eeee00;">#include <stdio.h></stdio.h></span><br><span style="color: #eeee00;">#include <string.h></string.h></span><br><span style="color: #eeee00;">#include <stdlib.h></stdlib.h></span><br><span style="color: #eeee00;">#include <math.h></math.h></span><br><br><span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">F</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">R</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">F1</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">F2</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">R1</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">R2</span><br><span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">amax</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">bmax</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">amin</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">bmin</span><span style="color: #da70d6;">//amax amin是前轮的最小和最大值 bmin和bmax是后轮的最小和最大值</span><br><span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">a</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">10</span><span style="color: #f5deb3;">],</span>b<span style="color: #f5deb3;">[</span><span style="color: #add8e6;">12</span><span style="color: #f5deb3;">],</span><span style="color: #f5deb3;">aa</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">10</span><span style="color: #f5deb3;">],</span>bb<span style="color: #f5deb3;">[</span><span style="color: #add8e6;">12</span><span style="color: #f5deb3;">];</span><span style="color: #da70d6;">//a记录本次的前轮数据 b本次的后轮数据 aa和bb是最优的前轮和</span><br><br><span style="color: #f5deb3;">后轮数据</span><br><span style="font-weight: bold; color: #98fb98;">double</span> <span style="color: #f5deb3;">diff</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">56</span><span style="color: #f5deb3;">],</span><span style="color: #f5deb3;">mean</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">var</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">best</span><span style="color: #da70d6;">//diff和题中的有点不同</span><br><br><span style="font-weight: bold; color: #98fb98;">void</span> <span style="color: #ffffff;">dfsb</span>(<span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">now</span><span style="color: #f5deb3;">,</span><span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">beg</span>)<br><span style="color: #f5deb3;">{</span><br>    <span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">j</span><br>    <span style="font-weight: bold; color: #98fb98;">double</span> <span style="color: #f5deb3;">k</span><br>    <span style="font-weight: bold; color: #b0c4de;">if</span>(<span style="color: #f5deb3;">R</span> <span style="color: #f5deb3;">==</span> <span style="color: #f5deb3;">now</span>)<span style="color: #da70d6;">//后轮选完了</span><br>        <span style="color: #f5deb3;">{</span><br>            <span style="font-weight: bold; color: #b0c4de;">if</span>(<span style="color: #f5deb3;">a</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">0</span><span style="color: #f5deb3;">]</span><span style="color: #f5deb3;"><em></em></span><span style="color: #add8e6;">3</span><span style="color: #f5deb3;"></span>b<span style="color: #f5deb3;">[</span><span style="color: #add8e6;">0</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">&gt;</span> <span style="color: #f5deb3;">a</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">F</span><span style="color: #f5deb3;">-</span><span style="color: #add8e6;">1</span><span style="color: #f5deb3;">]</span><span style="color: #f5deb3;"><em></em></span>b<span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">R</span><span style="color: #f5deb3;">-</span><span style="color: #add8e6;">1</span><span style="color: #f5deb3;">])</span><span style="color: #da70d6;">//the 3X rule</span><br>                <span style="font-weight: bold; color: #b0c4de;">return</span> ;<br>            <span style="font-weight: bold; color: #b0c4de;">for</span>(<span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">0</span><span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">&lt;</span> <span style="color: #f5deb3;">F</span>;<span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">++</span>)<br>                <span style="color: #f5deb3;">{</span><br>                    <span style="font-weight: bold; color: #b0c4de;">for</span>(<span style="color: #f5deb3;">j</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">0</span><span style="color: #f5deb3;">j</span> <span style="color: #f5deb3;">&lt;</span> <span style="color: #f5deb3;">R</span>;<span style="color: #f5deb3;">j</span><span style="color: #f5deb3;">++</span>)<br>                        <span style="color: #f5deb3;">{</span><span style="color: #da70d6;">//calc the diff</span><br>                            <span style="color: #f5deb3;">diff</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">R</span><span style="color: #f5deb3;"></span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">+</span><span style="color: #f5deb3;">j</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">a</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">]</span><span style="color: #f5deb3;"><em></em></span><span style="color: #add8e6;">1.0</span><span style="color: #f5deb3;">/</span>(b<span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">j</span><span style="color: #f5deb3;">]</span><br><br><span style="color: #f5deb3;"></span><span style="color: #add8e6;">1.0</span>);<br>                        <span style="color: #f5deb3;">}</span><br>                <span style="color: #f5deb3;">}</span><br>            <span style="font-weight: bold; color: #b0c4de;">for</span>(<span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">0</span><span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">&lt;</span> <span style="color: #f5deb3;">F</span><span style="color: #f5deb3;"><em></em></span><span style="color: #f5deb3;">R</span><span style="color: #f5deb3;">-</span><span style="color: #add8e6;">1</span>;<span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">++</span>)<br>                <span style="color: #f5deb3;">{</span><span style="color: #da70d6;">//冒泡排序</span><br>                    <span style="font-weight: bold; color: #b0c4de;">for</span>(<span style="color: #f5deb3;">j</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">F</span><span style="color: #f5deb3;"></span><span style="color: #f5deb3;">R</span><span style="color: #f5deb3;">-</span><span style="color: #add8e6;">1</span><span style="color: #f5deb3;">j</span> <span style="color: #f5deb3;">&gt;;</span> <span style="color: #f5deb3;">i</span>;<span style="color: #f5deb3;">j</span><span style="color: #f5deb3;">–</span>)<br>                        <span style="color: #f5deb3;">{</span><br>                            <span style="font-weight: bold; color: #b0c4de;">if</span>(<span style="color: #f5deb3;">diff</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">j</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">&gt;</span> <span style="color: #f5deb3;">diff</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">j</span><span style="color: #f5deb3;">-</span><span style="color: #add8e6;">1</span><span style="color: #f5deb3;">])</span><br>                                <span style="color: #f5deb3;">{</span><br>                                    <span style="color: #f5deb3;">k</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">diff</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">j</span><span style="color: #f5deb3;">];</span><br>                                    <span style="color: #f5deb3;">diff</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">j</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">diff</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">j</span><span style="color: #f5deb3;">-</span><span style="color: #add8e6;">1</span><span style="color: #f5deb3;">];</span><br>                                    <span style="color: #f5deb3;">diff</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">j</span><span style="color: #f5deb3;">-</span><span style="color: #add8e6;">1</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">k</span><br>                                <span style="color: #f5deb3;">}</span><br>                        <span style="color: #f5deb3;">}</span><br>                <span style="color: #f5deb3;">}</span><br>            <span style="color: #f5deb3;">mean</span> <span style="color: #f5deb3;">=</span> (<span style="color: #f5deb3;">diff</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">0</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">-</span> <span style="color: #f5deb3;">diff</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">R</span><span style="color: #f5deb3;"><em></em></span><span style="color: #f5deb3;">F</span><span style="color: #f5deb3;">-</span><span style="color: #add8e6;">1</span><span style="color: #f5deb3;">])</span><span style="color: #f5deb3;">/</span>(<span style="color: #f5deb3;">R</span><span style="color: #f5deb3;"></span><span style="color: #f5deb3;">F</span><span style="color: #f5deb3;">-</span><span style="color: #add8e6;">1</span>);<span style="color: #da70d6;">//the num of the </span><br><br><span style="color: #f5deb3;">differences</span> <span style="color: #f5deb3;">is</span> <span style="color: #f5deb3;">R</span><span style="color: #f5deb3;"><em></em></span><span style="color: #f5deb3;">F</span><span style="color: #f5deb3;">-</span><span style="color: #add8e6;">1</span>  <span style="color: #f5deb3;">计算平均值</span><br>            <span style="color: #f5deb3;">var</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">0</span><br>            <span style="color: #f5deb3;">j</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">R</span><span style="color: #f5deb3;"></span><span style="color: #f5deb3;">F</span><span style="color: #f5deb3;">-</span><span style="color: #add8e6;">1</span><br>            <span style="font-weight: bold; color: #b0c4de;">for</span>(<span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">0</span><span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">&lt;</span> <span style="color: #f5deb3;">j</span>;<span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">++</span>)<br>                <span style="color: #f5deb3;">{</span><br>                    <span style="color: #f5deb3;">var</span> <span style="color: #f5deb3;">+=</span> (<span style="color: #f5deb3;">diff</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">]</span><span style="color: #f5deb3;">-</span><span style="color: #f5deb3;">diff</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">+</span><span style="color: #add8e6;">1</span><span style="color: #f5deb3;">]</span><span style="color: #f5deb3;">-</span><span style="color: #f5deb3;">mean</span>)<span style="color: #f5deb3;"><em></em></span>(<span style="color: #f5deb3;">diff</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">]</span><span style="color: #f5deb3;">-</span><span style="color: #f5deb3;">diff</span><br><br><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">+</span><span style="color: #add8e6;">1</span><span style="color: #f5deb3;">]</span><span style="color: #f5deb3;">-</span><span style="color: #f5deb3;">mean</span>);<br>                <span style="color: #f5deb3;">}</span><br>            <span style="color: #f5deb3;">var</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">var</span><span style="color: #f5deb3;"></span><span style="color: #add8e6;">1.0</span><span style="color: #f5deb3;">/</span>(<span style="color: #f5deb3;">R</span><span style="color: #f5deb3;"><em></em></span><span style="color: #f5deb3;">F</span><span style="color: #f5deb3;">-</span><span style="color: #add8e6;">1</span>);<span style="color: #da70d6;">//计算方差</span><br>            <span style="font-weight: bold; color: #b0c4de;">if</span>(<span style="color: #f5deb3;">-</span><span style="color: #add8e6;">1</span> <span style="color: #f5deb3;">==</span> <span style="color: #f5deb3;">aa</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">0</span><span style="color: #f5deb3;">])</span><span style="color: #da70d6;">//如果是第一次的话</span><br>                <span style="color: #f5deb3;">{</span><br>                    <span style="font-weight: bold; color: #b0c4de;">for</span>(<span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">0</span><span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">&lt;</span> <span style="color: #f5deb3;">F</span>;<span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">++</span>)<br>                        <span style="color: #f5deb3;">aa</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">a</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">];</span><br>                    <span style="font-weight: bold; color: #b0c4de;">for</span>(<span style="color: #f5deb3;">j</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">0</span><span style="color: #f5deb3;">j</span> <span style="color: #f5deb3;">&lt;</span> <span style="color: #f5deb3;">R</span>;<span style="color: #f5deb3;">j</span><span style="color: #f5deb3;">++</span>)<br>                        bb<span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">=</span> b<span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">];</span><br>                    <span style="color: #f5deb3;">best</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">var</span><br>                <span style="color: #f5deb3;">}</span><br>            <span style="font-weight: bold; color: #b0c4de;">else</span><br>                <span style="color: #f5deb3;">{</span><br>                    <span style="font-weight: bold; color: #b0c4de;">if</span>(<span style="color: #f5deb3;">var</span> <span style="color: #f5deb3;">&lt;</span> <span style="color: #f5deb3;">best</span>)<br>                        <span style="color: #f5deb3;">{</span><span style="color: #da70d6;">//如果更优的话</span><br>                            <span style="color: #f5deb3;">best</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">var</span><br>                            <span style="font-weight: bold; color: #b0c4de;">for</span>(<span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">0</span><span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">&lt;</span> <span style="color: #f5deb3;">F</span>;<span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">++</span>)<br>                                <span style="color: #f5deb3;">aa</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">a</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">];</span><br>                            <span style="font-weight: bold; color: #b0c4de;">for</span>(<span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">0</span><span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">&lt;</span> <span style="color: #f5deb3;">R</span>;<span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">++</span>)<br>                                bb<span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">=</span> b<span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">];</span><br>                        <span style="color: #f5deb3;">}</span><br>                <span style="color: #f5deb3;">}</span><br>            <span style="font-weight: bold; color: #b0c4de;">return</span> ;<br>        <span style="color: #f5deb3;">}</span><br>    <span style="font-weight: bold; color: #b0c4de;">if</span>(<span style="color: #f5deb3;">beg</span> <span style="color: #f5deb3;">&gt;</span> <span style="color: #f5deb3;">bmax</span>)<br>        <span style="font-weight: bold; color: #b0c4de;">return</span> ;<span style="color: #da70d6;">//没后轮选了</span><br>    <span style="font-weight: bold; color: #b0c4de;">for</span>(<span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">beg</span><span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">&lt;=</span> <span style="color: #f5deb3;">bmax</span>;<span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">++</span>)<br>        <span style="color: #f5deb3;">{</span><span style="color: #da70d6;">//选下一个后轮</span><br>            b<span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">now</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">i</span><br>            <span style="color: #f5deb3;">dfsb</span>(<span style="color: #f5deb3;">now</span><span style="color: #f5deb3;">+</span><span style="color: #add8e6;">1</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">+</span><span style="color: #add8e6;">1</span>);<br>        <span style="color: #f5deb3;">}</span><br><span style="color: #f5deb3;">}</span><br><span style="font-weight: bold; color: #98fb98;">void</span> <span style="color: #ffffff;">dfsa</span>(<span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">now</span><span style="color: #f5deb3;">,</span><span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">beg</span>)<br><span style="color: #f5deb3;">{</span><br>    <span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">j</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">k</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">kk</span><br>    <span style="font-weight: bold; color: #b0c4de;">if</span>(<span style="color: #f5deb3;">F</span> <span style="color: #f5deb3;">==</span> <span style="color: #f5deb3;">now</span>)<br>        <span style="color: #f5deb3;">{</span><span style="color: #da70d6;">//前轮选完了</span><br>            <span style="font-weight: bold; color: #b0c4de;">if</span>(<span style="color: #f5deb3;">a</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">0</span><span style="color: #f5deb3;">]</span><span style="color: #f5deb3;"></span><span style="color: #add8e6;">3</span><span style="color: #f5deb3;"><em></em></span><span style="color: #f5deb3;">R1</span> <span style="color: #f5deb3;">&gt;</span> <span style="color: #f5deb3;">a</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">F</span><span style="color: #f5deb3;">-</span><span style="color: #add8e6;">1</span><span style="color: #f5deb3;">]</span><span style="color: #f5deb3;"></span><span style="color: #f5deb3;">R2</span>)<br>                <span style="font-weight: bold; color: #b0c4de;">return</span><span style="color: #da70d6;">//3x规则</span><br>            <span style="color: #f5deb3;">dfsb</span>(<span style="color: #add8e6;">0</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">R1</span>);<span style="color: #da70d6;">//开始选后轮</span><br>            <span style="font-weight: bold; color: #b0c4de;">return</span> ;<br>        <span style="color: #f5deb3;">}</span><br>    <span style="font-weight: bold; color: #b0c4de;">if</span>(<span style="color: #f5deb3;">beg</span> <span style="color: #f5deb3;">&gt;</span> <span style="color: #f5deb3;">amax</span>)<br>        <span style="font-weight: bold; color: #b0c4de;">return</span> ;<span style="color: #da70d6;">//没前轮选了</span><br>    <span style="font-weight: bold; color: #b0c4de;">for</span>(<span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">beg</span><span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">&lt;=</span> <span style="color: #f5deb3;">amax</span>;<span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">++</span>)<br>        <span style="color: #f5deb3;">{</span><span style="color: #da70d6;">//测试当前的前轮 然后开始选下一个前轮</span><br>            <span style="color: #f5deb3;">a</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">now</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">i</span><br>            <span style="color: #f5deb3;">dfsa</span>(<span style="color: #f5deb3;">now</span><span style="color: #f5deb3;">+</span><span style="color: #add8e6;">1</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">+</span><span style="color: #add8e6;">1</span>);<br>        <span style="color: #f5deb3;">}</span><br><span style="color: #f5deb3;">}</span><br><br><span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #ffffff;">main</span>(<span style="font-weight: bold; color: #98fb98;">void</span>)<br><span style="color: #f5deb3;">{</span><br>    <span style="color: #f5deb3;">freopen</span>(<span style="color: #7fffd4;">“cowcycle.in”</span><span style="color: #f5deb3;">,</span><span style="color: #7fffd4;">“r”</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">stdin</span>);<br>    <span style="color: #f5deb3;">freopen</span>(<span style="color: #7fffd4;">“cowcycle.out”</span><span style="color: #f5deb3;">,</span><span style="color: #7fffd4;">“w”</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">stdout</span>);<br>    <span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">j</span><br>    <span style="color: #f5deb3;">scanf</span>(<span style="color: #7fffd4;">“%d%d”</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;"></span><span style="color: #f5deb3;">F</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">&amp;</span><span style="color: #f5deb3;">R</span>);<br>    <span style="color: #f5deb3;">scanf</span>(<span style="color: #7fffd4;">“%d%d%d%d”</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;"></span><span style="color: #f5deb3;">F1</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">&amp;</span><span style="color: #f5deb3;">F2</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">&amp;</span><span style="color: #f5deb3;">R1</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">&amp;</span><span style="color: #f5deb3;">R2</span>);<br>    <span style="color: #f5deb3;">amin</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">F1</span><br>    <span style="color: #f5deb3;">amax</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">F2</span><br>    <span style="color: #f5deb3;">bmax</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">R2</span><br>    <span style="color: #f5deb3;">bmin</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">R1</span><br>    <span style="color: #f5deb3;">aa</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">0</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">-</span><span style="color: #add8e6;">1</span><span style="color: #da70d6;">//标记</span><br>    <span style="color: #f5deb3;">dfsa</span>(<span style="color: #add8e6;">0</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">amin</span>);<span style="color: #da70d6;">//开始搜索</span><br>    <span style="color: #f5deb3;">printf</span>(<span style="color: #7fffd4;">“%d”</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">aa</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">0</span><span style="color: #f5deb3;">]);</span><br><span style="color: #da70d6;">//下面是输出</span><br>    <span style="font-weight: bold; color: #b0c4de;">for</span>(<span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">1</span><span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">&lt;</span> <span style="color: #f5deb3;">F</span>;<span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">++</span>)<br>        <span style="color: #f5deb3;">printf</span>(<span style="color: #7fffd4;">“ %d”</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">aa</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">]);</span><br>    <span style="color: #f5deb3;">printf</span>(<span style="color: #7fffd4;">“</span><span style="color: #7fffd4;">\n</span><span style="color: #7fffd4;">%d”</span><span style="color: #f5deb3;">,</span>bb<span style="color: #f5deb3;">[</span><span style="color: #add8e6;">0</span><span style="color: #f5deb3;">]);</span><br>    <span style="font-weight: bold; color: #b0c4de;">for</span>(<span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">1</span><span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">&lt;</span> <span style="color: #f5deb3;">R</span>;<span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">++</span>)<br>        <span style="color: #f5deb3;">printf</span>(<span style="color: #7fffd4;">“ %d”</span><span style="color: #f5deb3;">,</span>bb<span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">]);</span><br>    <span style="color: #f5deb3;">printf</span>(<span style="color: #7fffd4;">“</span><span style="color: #7fffd4;">\n</span><span style="color: #7fffd4;">“</span>);<br>    <span style="font-weight: bold; color: #b0c4de;">return</span> <span style="color: #add8e6;">0</span><br><span style="color: #f5deb3;">}</span></div>

	
	</div>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2011-02-12 </div>
			<div class="article-title"><a href="/2011/02/12/usaco-4-2-3-job-processing/" >USACO 4.2.3 Job processing</a></div>						
		</h3>
	


			  <div class="entry">
  <div class="row">
	
	
		<p><a href="http://www.nocow.cn/index.php/Translate:USACO/job" target="_blank" rel="external">题意</a></p>
<p>对于第一问,比较容易想到.直接贪心就可以了,也就是每次都只处理一个任务,每次取当前结束时间最靠前的一个,这样的话,就可以保证总的结束时间一定是最早的.比如说5 2 3 1 1 3 1 4的话,那么一共会循环5次[也就是5个任务],第一次选第一台机器,因为它的结束时间是1,然后它的结束时间就会变成2[这里是指如果这个任务让这台机器来完成,那么完成之后的结束时间],第二次就会选第2台机器,因为第二台机器的结束时间还是1,依次类推,完成A任务的时间就会是1 1 2 2 3也就是一共需要3个单位的时间这是第一问的答案.那么第二问的答案就比这个要稍微难想一点,不过我们知道A B两项任务是没关系的,也就是进水不犯河水,各干各的.而且对于完成每个任务的每种机器也是各干各的,互不干扰.还有一点就是我们可以想象如果把完成A任务的和完成B任务的所需时间一个按从小到大排序,一个从大到小排序,然后对应的相加,也就是说完成A任务最早的放到B那就让它最晚完成,这样总的结束时间就会早一点.但是这里有个问题就是这样可以吗,因为B任务的开始是以A任务的结束为开始的,如果B任务那样一搞,但是A那某个还没完成咋办呢?这样我们来看看一个简单的分析,就那上面的例子来说,那么排序之后会是这样的<br>1 1 2 2 3<br>4 3 3 2 1[单独完成B任务所需的时间]这里还得说一点,就是这个时间是可以”换”的,也就是不一定要特定的任务在特定的机器上完成,反正就是里面的2和3 或者3和4之类的不是指的某个任务在第几个单位时间内完成,而是说最好的安排是有任务在第1个单位完成,有任务在第4个单位完成,这就OK了.<br>那么我们的第二问就是这样排列之后上下两个相加,然后取这些和的最大值.这里是5.但是就会有这样的疑问,也就是说下面那一排是首先不管A的,那么又没有可能是某个时候和下面对应的那个上面的任务还没问成呢?这样不是就不对了么?这里我们可以这样考虑,因为对于B中不同的机器之间是不存在这样的问题的,只有对于同一类机器,可是说同一台机器才会有这样的问题,因为不同机器是互不干扰的,那么我们单独考虑一台机器[B机器]<br>如果我们有如下的情况<br>1 3 6<br>6 4 2[这里是说明这台机器完成一件任务需要2分钟]<br>那么我们得到的结果应该是8[=2+6],那么第1分钟的时候第一件A任务完成了,现在我们可以让B的机器去做它,到了第3分钟刚好完成了,那么我们让它继续做第二件A任务,到了第5分钟的时候完成了,可是现在没有A任务给它,好的,这样更好,因为这样不会有我们认为的那种”忙不过来的”感觉.最终第6分钟来任务了,在第8分钟结束.<br>好了看看下面的一组数据<br>1 4 6<br>9 6 3<br>这里的数据是第1分钟B机器接到任务,然后第4分钟完成了,然后刚好接到第二个任务,继续做,到了第6分钟的时候,还没做完,怎么办?继续做原来的任务,这样就在第7分钟开始做等在那得第三个任务,可是这是不是一个巧合呢?下面就是见证奇迹的时候- -.其实这不是什么巧合,而是事实.你可以这样想,反正B任务得工作9个单位时间,这两个例子里面是不是都工作了9个单位时间呢?对啊,没错啊.可是还是有点糊涂,那么你可以把第一行的后一个减前一个得到一个差,这样就会得到另外一个数列,如下<br>3 2<br>这里要干嘛呢?你可以这样想,如果要是出现前面那种情况,那么后面的和会比较大[8比前面的大,这个原因就是上面的数列决定的]如果要是第二个例子的话,那么后面的结果不会比前面的大,这样只需要知道放在这台机器上工作的A任务的第一个任务的完成时间然后再加上一个几个任务*每个任务的时间久OK了.这样每台机器的搞清楚了,因为不同机器互不干扰,所以这样就是最佳答案了.</p>
<p>代码如下:</p>
<div class="source" style="color: #f5deb3; font-family: 'Courier New','Lucida Console','monospace'; background-color: #2f4f4f;"><span style="color: #da70d6;">/<em></em></span><br><span style="color: #da70d6;">ID:qcx97811</span><br><span style="color: #da70d6;">LANG:C</span><br><span style="color: #da70d6;">TASK:job</span><br><span style="color: #da70d6;">/</span><br><span style="color: #eeee00;">#include <stdio.h></stdio.h></span><br><span style="color: #eeee00;">#include <string.h></string.h></span><br><span style="color: #eeee00;">#include <stdlib.h></stdlib.h></span><br><span style="font-weight: bold; color: #b0c4de;">typedef</span> <span style="font-weight: bold; color: #b0c4de;">struct</span><br><span style="color: #f5deb3;">{</span><br>    <span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">end</span><br>    <span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">cost</span><br><span style="color: #f5deb3;">}</span><span style="color: #f5deb3;">Node</span><br><br><span style="color: #f5deb3;">Node</span> <span style="color: #f5deb3;">aMachine</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">36</span><span style="color: #f5deb3;">],</span><span style="color: #f5deb3;">bMachine</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">36</span><span style="color: #f5deb3;">];</span><br><span style="font-weight: bold; color: #98fb98;">int</span> N<span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">A</span><span style="color: #f5deb3;">,</span>B;<br><span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">aEnd</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">1006</span><span style="color: #f5deb3;">],</span><span style="color: #f5deb3;">bEnd</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">1006</span><span style="color: #f5deb3;">];</span><br><span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">total</span><br><br><span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #ffffff;">cmp</span>(<span style="font-weight: bold; color: #b0c4de;">const</span> <span style="font-weight: bold; color: #98fb98;">void</span> <span style="color: #f5deb3;"><em></em></span><span style="color: #f5deb3;">a</span><span style="color: #f5deb3;">,</span><span style="font-weight: bold; color: #b0c4de;">const</span> <span style="font-weight: bold; color: #98fb98;">void</span> <span style="color: #f5deb3;"></span>b)<br><span style="color: #f5deb3;">{</span><br>    <span style="color: #f5deb3;">Node</span> <span style="color: #f5deb3;"><em></em></span><span style="color: #f5deb3;">c</span> <span style="color: #f5deb3;">=</span> (<span style="color: #f5deb3;">Node</span> <span style="color: #f5deb3;"></span>)<span style="color: #f5deb3;">a</span><br>    <span style="color: #f5deb3;">Node</span> <span style="color: #f5deb3;"><em></em></span><span style="color: #f5deb3;">d</span> <span style="color: #f5deb3;">=</span> (<span style="color: #f5deb3;">Node</span> <span style="color: #f5deb3;"></span>)b;<br>    <span style="font-weight: bold; color: #b0c4de;">if</span>(<span style="color: #f5deb3;">c</span><span style="color: #f5deb3;">-&gt;</span><span style="color: #f5deb3;">end</span> <span style="color: #f5deb3;">==</span> <span style="color: #f5deb3;">d</span><span style="color: #f5deb3;">-&gt;</span><span style="color: #f5deb3;">end</span>)<br>        <span style="font-weight: bold; color: #b0c4de;">return</span> <span style="color: #add8e6;">0</span><br>    <span style="font-weight: bold; color: #b0c4de;">if</span>(<span style="color: #f5deb3;">c</span><span style="color: #f5deb3;">-&gt;</span><span style="color: #f5deb3;">end</span> <span style="color: #f5deb3;">&gt;</span> <span style="color: #f5deb3;">d</span><span style="color: #f5deb3;">-&gt;</span><span style="color: #f5deb3;">end</span>)<br>        <span style="font-weight: bold; color: #b0c4de;">return</span> <span style="color: #add8e6;">1</span><br>    <span style="font-weight: bold; color: #b0c4de;">return</span> <span style="color: #f5deb3;">-</span><span style="color: #add8e6;">1</span><br><span style="color: #f5deb3;">}</span><br><br><span style="font-weight: bold; color: #98fb98;">void</span> <span style="color: #ffffff;">work</span>()<br><span style="color: #f5deb3;">{</span><br>    <span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">tn</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">k</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">i</span><br>    <span style="color: #f5deb3;">tn</span> <span style="color: #f5deb3;">=</span> N;<br>    <span style="color: #f5deb3;">memset</span>(<span style="color: #f5deb3;">aEnd</span><span style="color: #f5deb3;">,</span><span style="color: #add8e6;">0</span><span style="color: #f5deb3;">,</span><span style="font-weight: bold; color: #b0c4de;">sizeof</span>(<span style="color: #f5deb3;">aEnd</span>));<br>    <span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">0</span><br>    <span style="font-weight: bold; color: #b0c4de;">while</span>(<span style="color: #f5deb3;">tn</span>)<br>        <span style="color: #f5deb3;">{</span><span style="color: #da70d6;">//每次减少一个任务</span><br>            <span style="color: #f5deb3;">qsort</span>(<span style="color: #f5deb3;">aMachine</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">A</span><span style="color: #f5deb3;">,</span><span style="font-weight: bold; color: #b0c4de;">sizeof</span>(<span style="color: #f5deb3;">aMachine</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">0</span><span style="color: #f5deb3;">]),</span><span style="color: #f5deb3;">cmp</span>);<span style="color: #da70d6;">//对结束时间排序</span><br>            <span style="color: #f5deb3;">tn</span><span style="color: #f5deb3;">–</span><br>            <span style="color: #f5deb3;">aEnd</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">aMachine</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">0</span><span style="color: #f5deb3;">].</span><span style="color: #f5deb3;">end</span><br>            <span style="color: #f5deb3;">aMachine</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">0</span><span style="color: #f5deb3;">].</span><span style="color: #f5deb3;">end</span> <span style="color: #f5deb3;">+=</span> <span style="color: #f5deb3;">aMachine</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">0</span><span style="color: #f5deb3;">].</span><span style="color: #f5deb3;">cost</span><span style="color: #da70d6;">//更改当前的结束时间</span><br>            <span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">++</span><br>        <span style="color: #f5deb3;">}</span><br><span style="color: #eeee00;">#if 0</span><br><span style="color: #da70d6;">    for(i = 0;i &lt; N;i++)</span><br><span style="color: #da70d6;">        printf(“<strong><strong>%d</strong></strong>\n”,aEnd[i]);</span><br><span style="color: #eeee00;">#endif</span><br>    <span style="color: #f5deb3;">printf</span>(<span style="color: #7fffd4;">“%d”</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">aEnd</span><span style="color: #f5deb3;">[</span>N<span style="color: #f5deb3;">-</span><span style="color: #add8e6;">1</span><span style="color: #f5deb3;">]);</span><span style="color: #da70d6;">//这个是A Machine工作完所需的时间</span><br>    <span style="color: #f5deb3;">tn</span> <span style="color: #f5deb3;">=</span> N;<br>    <span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">0</span><br>    <span style="font-weight: bold; color: #b0c4de;">while</span>(<span style="color: #f5deb3;">tn</span>)<br>        <span style="color: #f5deb3;">{</span><br>            <span style="color: #f5deb3;">qsort</span>(<span style="color: #f5deb3;">bMachine</span><span style="color: #f5deb3;">,</span>B<span style="color: #f5deb3;">,</span><span style="font-weight: bold; color: #b0c4de;">sizeof</span>(<span style="color: #f5deb3;">bMachine</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">0</span><span style="color: #f5deb3;">]),</span><span style="color: #f5deb3;">cmp</span>);<br>            <span style="color: #f5deb3;">tn</span><span style="color: #f5deb3;">–</span><br>            <span style="color: #f5deb3;">bEnd</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">bMachine</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">0</span><span style="color: #f5deb3;">].</span><span style="color: #f5deb3;">end</span><br>            <span style="color: #f5deb3;">bMachine</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">0</span><span style="color: #f5deb3;">].</span><span style="color: #f5deb3;">end</span> <span style="color: #f5deb3;">+=</span> <span style="color: #f5deb3;">bMachine</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">0</span><span style="color: #f5deb3;">].</span><span style="color: #f5deb3;">cost</span><br>            <span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">++</span><br>        <span style="color: #f5deb3;">}</span><br><span style="color: #eeee00;">#if 0</span><br><span style="color: #da70d6;">    printf(“\n”);</span><br><span style="color: #da70d6;">    for(i = 0;i &lt; N;i++)</span><br><span style="color: #da70d6;">        printf(“####%d####\n”,bEnd[i]);</span><br><span style="color: #eeee00;">#endif</span><br>    <span style="color: #f5deb3;">tn</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">aEnd</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">0</span><span style="color: #f5deb3;">]</span><span style="color: #f5deb3;">+</span><span style="color: #f5deb3;">bEnd</span><span style="color: #f5deb3;">[</span>N<span style="color: #f5deb3;">-</span><span style="color: #add8e6;">1</span><span style="color: #f5deb3;">];</span><br>    <span style="font-weight: bold; color: #b0c4de;">for</span>(<span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">0</span><span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">&lt;</span> N;<span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">++</span>)<br>        <span style="color: #f5deb3;">{</span><br>            <span style="font-weight: bold; color: #b0c4de;">if</span>(<span style="color: #f5deb3;">aEnd</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">+</span> <span style="color: #f5deb3;">bEnd</span><span style="color: #f5deb3;">[</span>N<span style="color: #f5deb3;">-</span><span style="color: #add8e6;">1</span><span style="color: #f5deb3;">-</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">&gt;</span> <span style="color: #f5deb3;">tn</span>)<br>                <span style="color: #f5deb3;">tn</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">aEnd</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">+</span> <span style="color: #f5deb3;">bEnd</span><span style="color: #f5deb3;">[</span>N<span style="color: #f5deb3;">-</span><span style="color: #add8e6;">1</span><span style="color: #f5deb3;">-</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">];</span><br>        <span style="color: #f5deb3;">}</span><br>    <span style="color: #f5deb3;">printf</span>(<span style="color: #7fffd4;">“ %d</span><span style="color: #7fffd4;">\n</span><span style="color: #7fffd4;">“</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">tn</span>);<br><span style="color: #f5deb3;">}</span><br><br><span style="font-weight: bold; color: #98fb98;">void</span> <span style="color: #ffffff;">input</span>(<span style="color: #f5deb3;">Node</span> <span style="color: #f5deb3;">in</span><span style="color: #f5deb3;">[],</span><span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">num</span>)<br><span style="color: #f5deb3;">{</span><br>    <span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">i</span><br>    <span style="font-weight: bold; color: #b0c4de;">for</span>(<span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">0</span><span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">&lt;</span> <span style="color: #f5deb3;">num</span>;<span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">++</span>)<br>        <span style="color: #f5deb3;">{</span><br>            <span style="color: #f5deb3;">scanf</span>(<span style="color: #7fffd4;">“%d”</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;"></span><span style="color: #f5deb3;">in</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">].</span><span style="color: #f5deb3;">cost</span>);<br>            <span style="color: #f5deb3;">in</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">].</span><span style="color: #f5deb3;">end</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">in</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">].</span><span style="color: #f5deb3;">cost</span><br>        <span style="color: #f5deb3;">}</span><br><span style="color: #f5deb3;">}</span><br><span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #ffffff;">main</span>(<span style="font-weight: bold; color: #98fb98;">void</span>)<br><span style="color: #f5deb3;">{</span><br>    <span style="color: #f5deb3;">freopen</span>(<span style="color: #7fffd4;">“job.in”</span><span style="color: #f5deb3;">,</span><span style="color: #7fffd4;">“r”</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">stdin</span>);<br>    <span style="color: #f5deb3;">freopen</span>(<span style="color: #7fffd4;">“job.out”</span><span style="color: #f5deb3;">,</span><span style="color: #7fffd4;">“w”</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">stdout</span>);<br>    <span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">i</span><br>    <span style="color: #f5deb3;">scanf</span>(<span style="color: #7fffd4;">“%d%d%d”</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;"></span>N<span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">&amp;</span><span style="color: #f5deb3;">A</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">&amp;</span>B);<br>    <span style="color: #f5deb3;">input</span>(<span style="color: #f5deb3;">aMachine</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">A</span>);<br>    <span style="color: #f5deb3;">input</span>(<span style="color: #f5deb3;">bMachine</span><span style="color: #f5deb3;">,</span>B);<br>    <span style="color: #f5deb3;">work</span>();<br>    <span style="font-weight: bold; color: #b0c4de;">return</span> <span style="color: #add8e6;">0</span><br><span style="color: #f5deb3;">}</span></div>

	
	</div>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2011-02-11 </div>
			<div class="article-title"><a href="/2011/02/11/usaco-4-2-2-the-perfect-stall-dinic/" >USACO 4-2-2 The Perfect Stall --网络流dinic算法</a></div>						
		</h3>
	


			  <div class="entry">
  <div class="row">
	
	
		<p><a href="http://www.nocow.cn/index.php/Translate:USACO/stall4" target="_blank" rel="external">题意</a></p>
<p>利用这题学习了下dinic.题意就不说了,很容易理解的一题</p>
<p>以前网络流的算法一直只懂最白痴的EK,后来大家说sap是万能的,于是就想学学sap,可是找了些资料之后发现我先学会的是dinic.下面说说我的理解吧.如有错误还请指出.<br>首先说明下层次图的概念:对原图的每一个点设置一个层次,这个新图就成了所谓的层次图了.然后允许弧就是层次图中有边且原图中也有边的弧.<br>dinic就是利用层次图,然后每次找增广路径的时候就只走允许弧,如果单纯这样的话,个人认为和EK算法还是差不了多少的,毕竟dinic也是多次bfs然后再dfs找增广路,那我不还如EK呢,何况EK还简单不易写错.dinic的精华应该是退栈,也就是dfs找到一条增广路之后,并不是再从源点开始找一次,而是退到从源点可达的最远一个点[这样说来很抽象]比如下面的例子<br>ab = 10  bc = 5 cd = 5 bf=5 fd=5 de=10[abcdef是顶点]<br>那么源点是a汇点是f的话<br>栈中情况是a-&gt;ab-&gt;abc-&gt;abcd-&gt;abcde–增广—然后退到b因为b是栈中a现在能够到达的最远的顶点了.现在从b开始增广就会出现时ab-&gt;abf-&gt;abfd-&gt;abfde—增广也就是dinic的精华在这里;具体的大家可以看2007年王上欣的论文&lt;浅谈基于分层思想的网络流算法&gt;<br>下面给出我的一份代码,经供参考</p>
<p><div class="source" style="color: #f5deb3; font-family: 'Courier New','Lucida Console','monospace'; background-color: #2f4f4f;"><span style="color: #da70d6;">/<em></em></span><br><span style="color: #da70d6;">ID:qcx97811</span><br><span style="color: #da70d6;">LANG:C</span><br><span style="color: #da70d6;">TASK:stall4</span><br><span style="color: #da70d6;">/</span><br><span style="color: #eeee00;">#include <stdio.h></stdio.h></span><br><span style="color: #eeee00;">#include <stdlib.h></stdlib.h></span><br><span style="color: #eeee00;">#include <string.h></string.h></span><br><span style="color: #eeee00;">#include <limits.h></limits.h></span></div><br><span style="font-weight: bold; color: #98fb98;">int</span> N<span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">M</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">maxflow</span><span style="color: #da70d6;">//N和M是题目中的意思 maxflow就是最大流的值</span><br><span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">graph</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">406</span><span style="color: #f5deb3;">][</span><span style="color: #add8e6;">406</span><span style="color: #f5deb3;">],</span><span style="color: #f5deb3;">pre</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">406</span><span style="color: #f5deb3;">],</span><span style="color: #f5deb3;">d</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">406</span><span style="color: #f5deb3;">];</span><span style="color: #da70d6;">//graph是图 pre是每个节点的前驱 d表示每个节点的层次</span></p>
<p><span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #ffffff;">outdegree</span>(<span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">now</span>)<br><span style="color: #f5deb3;">{</span><span style="color: #da70d6;">//返回传入顶点的出度包括在层次图中的信息</span><br>    <span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">out</span><br>    <span style="color: #f5deb3;">out</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">0</span><span style="color: #da70d6;">//out代表传入顶点的出度</span><br>    <span style="font-weight: bold; color: #b0c4de;">for</span>(<span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">0</span><span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">&lt;=</span> (N<span style="color: #f5deb3;">+</span><span style="color: #f5deb3;">M</span><span style="color: #f5deb3;">+</span><span style="color: #add8e6;">1</span>);<span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">++</span>)<br>        <span style="font-weight: bold; color: #b0c4de;">if</span>(((<span style="color: #f5deb3;">d</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">now</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">+</span> <span style="color: #add8e6;">1</span>) <span style="color: #f5deb3;">==</span> <span style="color: #f5deb3;">d</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">])</span> <span style="color: #f5deb3;">&amp;</span> <span style="color: #f5deb3;">graph</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">now</span><span style="color: #f5deb3;">][</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">&gt;</span> <span style="color: #add8e6;">0</span>)<br>            <span style="color: #f5deb3;">{</span><span style="color: #da70d6;">//这里用break是因为只需要知道出度是否为0 不需要知道度为多少</span><br>                <span style="color: #f5deb3;">out</span><span style="color: #f5deb3;">++</span><br>                <span style="font-weight: bold; color: #b0c4de;">break</span><br>            <span style="color: #f5deb3;">}</span><br>    <span style="font-weight: bold; color: #b0c4de;">return</span> <span style="color: #f5deb3;">out</span><br><span style="color: #f5deb3;">}</span><br><span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #ffffff;">dinic</span>()<br><span style="color: #f5deb3;">{</span><br>    <span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">rear</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">front</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">u</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">out</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">top</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">add</span><br>    <span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">q</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">406</span><span style="color: #f5deb3;">];</span><br>    <span style="color: #f5deb3;">maxflow</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">0</span><br>    <span style="font-weight: bold; color: #b0c4de;">while</span>(<span style="color: #add8e6;">1</span>)<br>        <span style="color: #f5deb3;">{</span><br>            <span style="color: #da70d6;">//通过bfs重构层次图</span><br>            <span style="color: #f5deb3;">memset</span>(<span style="color: #f5deb3;">d</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">-</span><span style="color: #add8e6;">1</span><span style="color: #f5deb3;">,</span><span style="font-weight: bold; color: #b0c4de;">sizeof</span>(<span style="color: #f5deb3;">d</span>));<br>            <span style="color: #f5deb3;">memset</span>(<span style="color: #f5deb3;">pre</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">-</span><span style="color: #add8e6;">1</span><span style="color: #f5deb3;">,</span><span style="font-weight: bold; color: #b0c4de;">sizeof</span>(<span style="color: #f5deb3;">pre</span>));<br>            <span style="color: #f5deb3;">d</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">0</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">pre</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">0</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">0</span><span style="color: #da70d6;">//这里pre数组相当于一个bool数组记录某个顶点是否被用</span><br>            <span style="color: #f5deb3;">rear</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">front</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">-</span><span style="color: #add8e6;">1</span><br>            <span style="color: #f5deb3;">rear</span><span style="color: #f5deb3;">++</span><br>            <span style="color: #f5deb3;">q</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">rear</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">0</span><br>            <span style="font-weight: bold; color: #b0c4de;">while</span>(<span style="color: #f5deb3;">front</span> <span style="color: #f5deb3;">&lt;</span> <span style="color: #f5deb3;">rear</span>)<br>                <span style="color: #f5deb3;">{</span><span style="color: #da70d6;">//bfs构建层次图</span><br>                    <span style="color: #f5deb3;">u</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">q</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">++</span><span style="color: #f5deb3;">front</span><span style="color: #f5deb3;">];</span><br>                    <span style="font-weight: bold; color: #b0c4de;">for</span>(<span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">0</span><span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">&lt;=</span> (N<span style="color: #f5deb3;">+</span><span style="color: #f5deb3;">M</span><span style="color: #f5deb3;">+</span><span style="color: #add8e6;">1</span>);<span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">++</span>)<br>                        <span style="color: #f5deb3;">{</span><br>                            <span style="font-weight: bold; color: #b0c4de;">if</span>(<span style="color: #f5deb3;">-</span><span style="color: #add8e6;">1</span> <span style="color: #f5deb3;">==</span> <span style="color: #f5deb3;">pre</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">&amp;</span> <span style="color: #f5deb3;">graph</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">u</span><span style="color: #f5deb3;">][</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">&gt;</span> <span style="color: #add8e6;">0</span>)<br>                                <span style="color: #f5deb3;">{</span><span style="color: #da70d6;">//如果这个点没有被用而且残留网络中有边</span><br>                                    <span style="color: #f5deb3;">pre</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">u</span><span style="color: #da70d6;">//记录当前顶点已经被用</span><br>                                    <span style="color: #f5deb3;">d</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">d</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">u</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">+</span> <span style="color: #add8e6;">1</span><span style="color: #da70d6;">//层次加1</span><br>                                    <span style="color: #f5deb3;">rear</span><span style="color: #f5deb3;">++</span><span style="color: #da70d6;">//入队</span><br>                                    <span style="color: #f5deb3;">q</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">rear</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">i</span><br>                                <span style="color: #f5deb3;">}</span><br>                        <span style="color: #f5deb3;">}</span><br>                <span style="color: #f5deb3;">}</span></p>
<pre><code>    &lt;span style=&quot;font-weight: bold; color: #b0c4de;&quot;&gt;if&lt;/span&gt;(&lt;span style=&quot;color: #f5deb3;&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;color: #add8e6;&quot;&gt;1&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;==&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;pre&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;[&lt;/span&gt;N&lt;span style=&quot;color: #f5deb3;&quot;&gt;+&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;M&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;+&lt;/span&gt;&lt;span style=&quot;color: #add8e6;&quot;&gt;1&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;])&lt;/span&gt;
        &lt;span style=&quot;font-weight: bold; color: #b0c4de;&quot;&gt;break&lt;/span&gt;&lt;span style=&quot;color: #da70d6;&quot;&gt;//如果汇点不在层次图中标明已无增广路径&lt;/span&gt;

    &lt;span style=&quot;color: #f5deb3;&quot;&gt;out&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;outdegree&lt;/span&gt;(&lt;span style=&quot;color: #add8e6;&quot;&gt;0&lt;/span&gt;);

    &lt;span style=&quot;color: #f5deb3;&quot;&gt;top&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: #add8e6;&quot;&gt;0&lt;/span&gt;
    &lt;span style=&quot;color: #f5deb3;&quot;&gt;q&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;[&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;top&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;]&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: #add8e6;&quot;&gt;0&lt;/span&gt;&lt;span style=&quot;color: #da70d6;&quot;&gt;//这里的q是用来记录增广路径上的点&lt;/span&gt;
    &lt;span style=&quot;font-weight: bold; color: #b0c4de;&quot;&gt;while&lt;/span&gt;(&lt;span style=&quot;color: #f5deb3;&quot;&gt;out&lt;/span&gt;)&lt;span style=&quot;color: #da70d6;&quot;&gt;//循环直到源点的出度为0&lt;/span&gt;
        &lt;span style=&quot;color: #f5deb3;&quot;&gt;{&lt;/span&gt;
            &lt;span style=&quot;color: #f5deb3;&quot;&gt;u&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;q&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;[&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;top&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;];&lt;/span&gt;&lt;span style=&quot;color: #da70d6;&quot;&gt;//取栈顶元素&lt;/span&gt;
            &lt;span style=&quot;font-weight: bold; color: #b0c4de;&quot;&gt;if&lt;/span&gt;((N&lt;span style=&quot;color: #f5deb3;&quot;&gt;+&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;M&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;+&lt;/span&gt;&lt;span style=&quot;color: #add8e6;&quot;&gt;1&lt;/span&gt;) &lt;span style=&quot;color: #f5deb3;&quot;&gt;==&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;u&lt;/span&gt;)&lt;span style=&quot;color: #da70d6;&quot;&gt;//如果已经找到一条增广路径&lt;/span&gt;
                &lt;span style=&quot;color: #f5deb3;&quot;&gt;{&lt;/span&gt;&lt;span style=&quot;color: #da70d6;&quot;&gt;//增广 然后队列回退到从源点可达的最远点&lt;/span&gt;
                    &lt;span style=&quot;color: #f5deb3;&quot;&gt;add&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;INT_MAX&lt;/span&gt;
                    &lt;span style=&quot;font-weight: bold; color: #b0c4de;&quot;&gt;for&lt;/span&gt;(&lt;span style=&quot;color: #f5deb3;&quot;&gt;i&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: #add8e6;&quot;&gt;0&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;i&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;&lt;&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;top&lt;/span&gt;;&lt;span style=&quot;color: #f5deb3;&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;++&lt;/span&gt;)
                        &lt;span style=&quot;color: #f5deb3;&quot;&gt;{&lt;/span&gt;&lt;span style=&quot;color: #da70d6;&quot;&gt;//判定本次可增广的流量&lt;/span&gt;
                            &lt;span style=&quot;font-weight: bold; color: #b0c4de;&quot;&gt;if&lt;/span&gt;(&lt;span style=&quot;color: #f5deb3;&quot;&gt;graph&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;[&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;q&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;[&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;]][&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;q&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;[&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;+&lt;/span&gt;&lt;span style=&quot;color: #add8e6;&quot;&gt;1&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;]]&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;&lt;&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;add&lt;/span&gt;)
                                &lt;span style=&quot;color: #f5deb3;&quot;&gt;{&lt;/span&gt;
                                    &lt;span style=&quot;color: #f5deb3;&quot;&gt;add&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;graph&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;[&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;q&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;[&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;]][&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;q&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;[&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;+&lt;/span&gt;&lt;span style=&quot;color: #add8e6;&quot;&gt;1&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;]];&lt;/span&gt;
                                &lt;span style=&quot;color: #f5deb3;&quot;&gt;}&lt;/span&gt;
                        &lt;span style=&quot;color: #f5deb3;&quot;&gt;}&lt;/span&gt;   
                    &lt;span style=&quot;font-weight: bold; color: #b0c4de;&quot;&gt;for&lt;/span&gt;(&lt;span style=&quot;color: #f5deb3;&quot;&gt;i&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: #add8e6;&quot;&gt;0&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;i&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;&lt;&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;top&lt;/span&gt;;&lt;span style=&quot;color: #f5deb3;&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;++&lt;/span&gt;)
                        &lt;span style=&quot;color: #f5deb3;&quot;&gt;{&lt;/span&gt;&lt;span style=&quot;color: #da70d6;&quot;&gt;//更新残留网络&lt;/span&gt;
                            &lt;span style=&quot;color: #f5deb3;&quot;&gt;graph&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;[&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;q&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;[&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;]][&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;q&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;[&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;+&lt;/span&gt;&lt;span style=&quot;color: #add8e6;&quot;&gt;1&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;]]&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;-=&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;add&lt;/span&gt;
                            &lt;span style=&quot;color: #f5deb3;&quot;&gt;graph&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;[&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;q&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;[&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;+&lt;/span&gt;&lt;span style=&quot;color: #add8e6;&quot;&gt;1&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;]][&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;q&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;[&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;]]&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;+=&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;add&lt;/span&gt;
                        &lt;span style=&quot;color: #f5deb3;&quot;&gt;}&lt;/span&gt;
                    &lt;span style=&quot;color: #f5deb3;&quot;&gt;maxflow&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;+=&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;add&lt;/span&gt;&lt;span style=&quot;color: #da70d6;&quot;&gt;//增加网络流量&lt;/span&gt;
                    &lt;span style=&quot;color: #da70d6;&quot;&gt;//下面回退到从源点可达的最远的一个点&lt;/span&gt;
                    &lt;span style=&quot;font-weight: bold; color: #b0c4de;&quot;&gt;for&lt;/span&gt;(&lt;span style=&quot;color: #f5deb3;&quot;&gt;i&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: #add8e6;&quot;&gt;0&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;i&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;&lt;=&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;top&lt;/span&gt;;&lt;span style=&quot;color: #f5deb3;&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;++&lt;/span&gt;)
                        &lt;span style=&quot;color: #f5deb3;&quot;&gt;{&lt;/span&gt;
                            &lt;span style=&quot;font-weight: bold; color: #b0c4de;&quot;&gt;if&lt;/span&gt;(&lt;span style=&quot;color: #f5deb3;&quot;&gt;outdegree&lt;/span&gt;(&lt;span style=&quot;color: #f5deb3;&quot;&gt;q&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;[&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;])&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;==&lt;/span&gt; &lt;span style=&quot;color: #add8e6;&quot;&gt;0&lt;/span&gt;)
                                &lt;span style=&quot;color: #f5deb3;&quot;&gt;{&lt;/span&gt;&lt;span style=&quot;color: #da70d6;&quot;&gt;//这里不应该只考虑出度还应该考虑和q中的下一个元素是否有边(包括层次图和残留网络)&lt;/span&gt;
                                    &lt;span style=&quot;color: #f5deb3;&quot;&gt;top&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;color: #add8e6;&quot;&gt;1&lt;/span&gt;&lt;span style=&quot;color: #da70d6;&quot;&gt;//这个地方如果出现top=-1应该也没问题的 因为这样的话out已经为0了&lt;/span&gt;
                                    &lt;span style=&quot;font-weight: bold; color: #b0c4de;&quot;&gt;break&lt;/span&gt;
                                &lt;span style=&quot;color: #f5deb3;&quot;&gt;}&lt;/span&gt;
                            &lt;span style=&quot;font-weight: bold; color: #b0c4de;&quot;&gt;if&lt;/span&gt;(&lt;span style=&quot;color: #f5deb3;&quot;&gt;graph&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;[&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;q&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;[&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;]][&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;q&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;[&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;+&lt;/span&gt;&lt;span style=&quot;color: #add8e6;&quot;&gt;1&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;]]&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;&lt;=&lt;/span&gt; &lt;span style=&quot;color: #add8e6;&quot;&gt;0&lt;/span&gt;)
                                &lt;span style=&quot;color: #f5deb3;&quot;&gt;{&lt;/span&gt;&lt;span style=&quot;color: #da70d6;&quot;&gt;//这个是防止某个点出度不为0但是q中这个点和下一个点的边已经为0了 那么就会一直死循环在里面这个while里&lt;/span&gt;
                                    &lt;span style=&quot;color: #f5deb3;&quot;&gt;top&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;i&lt;/span&gt;
                                    &lt;span style=&quot;font-weight: bold; color: #b0c4de;&quot;&gt;break&lt;/span&gt;
                                &lt;span style=&quot;color: #f5deb3;&quot;&gt;}&lt;/span&gt;
                        &lt;span style=&quot;color: #f5deb3;&quot;&gt;}&lt;/span&gt;
                &lt;span style=&quot;color: #f5deb3;&quot;&gt;}&lt;/span&gt;
            &lt;span style=&quot;font-weight: bold; color: #b0c4de;&quot;&gt;else&lt;/span&gt;
                &lt;span style=&quot;color: #f5deb3;&quot;&gt;{&lt;/span&gt;
                    &lt;span style=&quot;font-weight: bold; color: #b0c4de;&quot;&gt;if&lt;/span&gt;(&lt;span style=&quot;color: #f5deb3;&quot;&gt;outdegree&lt;/span&gt;(&lt;span style=&quot;color: #f5deb3;&quot;&gt;u&lt;/span&gt;) &lt;span style=&quot;color: #f5deb3;&quot;&gt;&gt;&lt;/span&gt; &lt;span style=&quot;color: #add8e6;&quot;&gt;0&lt;/span&gt;)
                        &lt;span style=&quot;color: #f5deb3;&quot;&gt;{&lt;/span&gt;&lt;span style=&quot;color: #da70d6;&quot;&gt;//该点的出度不为0 则改变队列 把当前顶点入队这里的出度包括层次图的信息&lt;/span&gt;
                            &lt;span style=&quot;font-weight: bold; color: #b0c4de;&quot;&gt;for&lt;/span&gt;(&lt;span style=&quot;color: #f5deb3;&quot;&gt;i&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: #add8e6;&quot;&gt;0&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;i&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;&lt;=&lt;/span&gt; (N&lt;span style=&quot;color: #f5deb3;&quot;&gt;+&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;M&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;+&lt;/span&gt;&lt;span style=&quot;color: #add8e6;&quot;&gt;1&lt;/span&gt;);&lt;span style=&quot;color: #f5deb3;&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;++&lt;/span&gt;)
                                &lt;span style=&quot;color: #f5deb3;&quot;&gt;{&lt;/span&gt;&lt;span style=&quot;color: #da70d6;&quot;&gt;//寻找u顶点的下一个顶点&lt;/span&gt;
                                    &lt;span style=&quot;font-weight: bold; color: #b0c4de;&quot;&gt;if&lt;/span&gt;(&lt;span style=&quot;color: #f5deb3;&quot;&gt;d&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;[&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;u&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;]&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;+&lt;/span&gt;&lt;span style=&quot;color: #add8e6;&quot;&gt;1&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;==&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;d&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;[&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;]&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;graph&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;[&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;u&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;][&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;]&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;&gt;&lt;/span&gt; &lt;span style=&quot;color: #add8e6;&quot;&gt;0&lt;/span&gt;)
                                        &lt;span style=&quot;color: #f5deb3;&quot;&gt;{&lt;/span&gt;
                                            &lt;span style=&quot;color: #f5deb3;&quot;&gt;top&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;++&lt;/span&gt;&lt;span style=&quot;color: #da70d6;&quot;&gt;//入栈&lt;/span&gt;
                                            &lt;span style=&quot;color: #f5deb3;&quot;&gt;q&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;[&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;top&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;]&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;i&lt;/span&gt;
                                            &lt;span style=&quot;font-weight: bold; color: #b0c4de;&quot;&gt;break&lt;/span&gt;
                                        &lt;span style=&quot;color: #f5deb3;&quot;&gt;}&lt;/span&gt;
                                &lt;span style=&quot;color: #f5deb3;&quot;&gt;}&lt;/span&gt;
                        &lt;span style=&quot;color: #f5deb3;&quot;&gt;}&lt;/span&gt;
                    &lt;span style=&quot;font-weight: bold; color: #b0c4de;&quot;&gt;else&lt;/span&gt;
                        &lt;span style=&quot;color: #f5deb3;&quot;&gt;{&lt;/span&gt;&lt;span style=&quot;color: #da70d6;&quot;&gt;//弹出队列的最高顶点&lt;/span&gt;
                            &lt;span style=&quot;color: #f5deb3;&quot;&gt;d&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;[&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;u&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;]&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;-&lt;/span&gt;&lt;span style=&quot;color: #add8e6;&quot;&gt;1&lt;/span&gt;&lt;span style=&quot;color: #da70d6;&quot;&gt;//当前顶点从层次图中删除&lt;/span&gt;
                            &lt;span style=&quot;color: #f5deb3;&quot;&gt;top&lt;/span&gt;&lt;span style=&quot;color: #f5deb3;&quot;&gt;--&lt;/span&gt;&lt;span style=&quot;color: #da70d6;&quot;&gt;//从栈中删除&lt;/span&gt;
                        &lt;span style=&quot;color: #f5deb3;&quot;&gt;}&lt;/span&gt;
                &lt;span style=&quot;color: #f5deb3;&quot;&gt;}&lt;/span&gt;
            &lt;span style=&quot;color: #f5deb3;&quot;&gt;out&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: #f5deb3;&quot;&gt;outdegree&lt;/span&gt;(&lt;span style=&quot;color: #add8e6;&quot;&gt;0&lt;/span&gt;);&lt;span style=&quot;color: #da70d6;&quot;&gt;//判定当前源点的出度&lt;/span&gt;
        &lt;span style=&quot;color: #f5deb3;&quot;&gt;}&lt;/span&gt;
&lt;span style=&quot;color: #f5deb3;&quot;&gt;}&lt;/span&gt;
</code></pre><p><span style="color: #f5deb3;">}</span></p>
<p><span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #ffffff;">main</span>(<span style="font-weight: bold; color: #98fb98;">void</span>)<br><span style="color: #f5deb3;">{</span><br>    <span style="color: #f5deb3;">freopen</span>(<span style="color: #7fffd4;">“stall4.in”</span><span style="color: #f5deb3;">,</span><span style="color: #7fffd4;">“r”</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">stdin</span>);<br>    <span style="color: #f5deb3;">freopen</span>(<span style="color: #7fffd4;">“stall4.out”</span><span style="color: #f5deb3;">,</span><span style="color: #7fffd4;">“w”</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">stdout</span>);<br>    <span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">j</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">ct</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">c</span><br>    <span style="color: #f5deb3;">memset</span>(<span style="color: #f5deb3;">graph</span><span style="color: #f5deb3;">,</span><span style="color: #add8e6;">0</span><span style="color: #f5deb3;">,</span><span style="font-weight: bold; color: #b0c4de;">sizeof</span>(<span style="color: #f5deb3;">graph</span>));<br>    <span style="color: #f5deb3;">scanf</span>(<span style="color: #7fffd4;">“%d%d”</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;"></span>N<span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">&amp;</span><span style="color: #f5deb3;">M</span>);<br>    <span style="color: #da70d6;">/<em>下面是初始化图</em>/</span><br>    <span style="font-weight: bold; color: #b0c4de;">for</span>(<span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">1</span><span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">&lt;=</span> N;<span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">++</span>)<br>        <span style="color: #f5deb3;">{</span><br>            <span style="color: #f5deb3;">scanf</span>(<span style="color: #7fffd4;">“%d”</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;"></span><span style="color: #f5deb3;">ct</span>);<br>            <span style="font-weight: bold; color: #b0c4de;">for</span>(<span style="color: #f5deb3;">j</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">0</span><span style="color: #f5deb3;">j</span> <span style="color: #f5deb3;">&lt;</span> <span style="color: #f5deb3;">ct</span>;<span style="color: #f5deb3;">j</span><span style="color: #f5deb3;">++</span>)<br>                <span style="color: #f5deb3;">{</span><br>                    <span style="color: #f5deb3;">scanf</span>(<span style="color: #7fffd4;">“%d”</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;"></span><span style="color: #f5deb3;">c</span>);<br>                    <span style="color: #f5deb3;">graph</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">][</span><span style="color: #f5deb3;">c</span><span style="color: #f5deb3;">+</span>N<span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">1</span><br>                <span style="color: #f5deb3;">}</span><br>        <span style="color: #f5deb3;">}</span><br>    <span style="font-weight: bold; color: #b0c4de;">for</span>(<span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">1</span><span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">&lt;=</span> N;<span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">++</span>)<br>        <span style="color: #f5deb3;">graph</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">0</span><span style="color: #f5deb3;">][</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">1</span><br>    <span style="font-weight: bold; color: #b0c4de;">for</span>(<span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">=</span> N<span style="color: #f5deb3;">+</span><span style="color: #add8e6;">1</span><span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">&lt;=</span> (N<span style="color: #f5deb3;">+</span><span style="color: #f5deb3;">M</span>);<span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">++</span>)<br>        <span style="color: #f5deb3;">graph</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">][</span>N<span style="color: #f5deb3;">+</span><span style="color: #f5deb3;">M</span><span style="color: #f5deb3;">+</span><span style="color: #add8e6;">1</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">1</span><br>    <span style="color: #da70d6;">/<em>上面是初始化图</em>/</span><br>    <span style="color: #f5deb3;">dinic</span>();<span style="color: #da70d6;">//调用dinic求最大流</span><br>    <span style="color: #f5deb3;">printf</span>(<span style="color: #7fffd4;">“%d</span><span style="color: #7fffd4;">\n</span><span style="color: #7fffd4;">“</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">maxflow</span>);<span style="color: #da70d6;">//输出最大流</span><br>    <span style="font-weight: bold; color: #b0c4de;">return</span> <span style="color: #add8e6;">0</span><br><span style="color: #f5deb3;">}</span></p>

	
	</div>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2011-02-10 </div>
			<div class="article-title"><a href="/2011/02/10/networkflow-1-maximum-matching/" >网络流24题之一最大匹配</a></div>						
		</h3>
	


			  <div class="entry">
  <div class="row">
	
	
		<p><a href="http://acm.nankai.edu.cn/p2121.html" target="_blank" rel="external">此处可提交</a></p>
<p>我用的还是最原始的EK算法,建图也比较简单,只要某两个人能配合好就给一个权值为1的边,然后增加一个超级源点和汇点,剩下的就是最大流了.不过最后输出时注意下(输出配对关系的时候),比如下面这组数据</p>
<p>2 4</p>
<p>1 3</p>
<p>1 4</p>
<p>2 3</p>
<p>-1 -1</p>
<p>代码如下:</p>
<div class="source" style="color: #f5deb3; font-family: 'Courier New','Lucida Console','monospace'; background-color: #2f4f4f;"><span style="color: #da70d6;">/<em></em></span><br><span style="color: #da70d6;">  LANG:C</span><br><span style="color: #da70d6;">  TASK:</span><br><span style="color: #da70d6;">  ID:qcx97811</span><br><span style="color: #da70d6;">/</span><br><span style="color: #eeee00;">#include <stdio.h></stdio.h></span><br><span style="color: #eeee00;">#include <stdlib.h></stdlib.h></span><br><span style="color: #eeee00;">#include <string.h></string.h></span><br><br><span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">graph</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">106</span><span style="color: #f5deb3;">][</span><span style="color: #add8e6;">106</span><span style="color: #f5deb3;">],</span><span style="color: #f5deb3;">pre</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">106</span><span style="color: #f5deb3;">];</span><br><span style="font-weight: bold; color: #98fb98;">int</span> N<span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">M</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">maxflow</span><br><br><span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #ffffff;">bfs</span>()<br><span style="color: #f5deb3;">{</span><br>    <span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">j</span><br>    <span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">q</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">206</span><span style="color: #f5deb3;">];</span><br>    <span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">front</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">rear</span><br>    <span style="color: #f5deb3;">memset</span>(<span style="color: #f5deb3;">pre</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">-</span><span style="color: #add8e6;">1</span><span style="color: #f5deb3;">,</span><span style="font-weight: bold; color: #b0c4de;">sizeof</span>(<span style="color: #f5deb3;">pre</span>));<br>    <span style="color: #f5deb3;">front</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">rear</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">-</span><span style="color: #add8e6;">1</span><br>    <span style="color: #f5deb3;">q</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">++</span><span style="color: #f5deb3;">rear</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">0</span><br>    <span style="font-weight: bold; color: #b0c4de;">while</span>(<span style="color: #f5deb3;">front</span> <span style="color: #f5deb3;">&lt;</span> <span style="color: #f5deb3;">rear</span>)<br>        <span style="color: #f5deb3;">{</span><br>            <span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">q</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">++</span><span style="color: #f5deb3;">front</span><span style="color: #f5deb3;">];</span><br>            <span style="font-weight: bold; color: #b0c4de;">for</span>(<span style="color: #f5deb3;">j</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">0</span><span style="color: #f5deb3;">j</span> <span style="color: #f5deb3;">&lt;=</span> (N<span style="color: #f5deb3;">+</span><span style="color: #add8e6;">1</span>);<span style="color: #f5deb3;">j</span><span style="color: #f5deb3;">++</span>)<br>                <span style="color: #f5deb3;">{</span><br>                    <span style="font-weight: bold; color: #b0c4de;">if</span>(<span style="color: #f5deb3;">-</span><span style="color: #add8e6;">1</span> <span style="color: #f5deb3;">==</span> <span style="color: #f5deb3;">pre</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">j</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">&amp;</span> <span style="color: #f5deb3;">graph</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">][</span><span style="color: #f5deb3;">j</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">&gt;</span> <span style="color: #add8e6;">0</span>)<br>                        <span style="color: #f5deb3;">{</span><br>                            <span style="color: #f5deb3;">pre</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">j</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">i</span><br>                            <span style="color: #f5deb3;">rear</span><span style="color: #f5deb3;">++</span><br>                            <span style="color: #f5deb3;">q</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">rear</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">j</span><br>                            <span style="font-weight: bold; color: #b0c4de;">if</span>(<span style="color: #f5deb3;">j</span> <span style="color: #f5deb3;">==</span> (N<span style="color: #f5deb3;">+</span><span style="color: #add8e6;">1</span>))<br>                                <span style="font-weight: bold; color: #b0c4de;">return</span> <span style="color: #add8e6;">1</span><br>                        <span style="color: #f5deb3;">}</span><br>                <span style="color: #f5deb3;">}</span><br>        <span style="color: #f5deb3;">}</span><br>    <span style="font-weight: bold; color: #b0c4de;">return</span> <span style="color: #add8e6;">0</span><br><span style="color: #f5deb3;">}</span><br><span style="font-weight: bold; color: #98fb98;">void</span> <span style="color: #ffffff;">max_flow</span>()<br><span style="color: #f5deb3;">{</span><br>    <span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">j</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">add</span><br>    <span style="color: #f5deb3;">maxflow</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">0</span><br>    <span style="font-weight: bold; color: #b0c4de;">while</span>(<span style="color: #add8e6;">0</span> <span style="color: #f5deb3;">!=</span> (<span style="color: #f5deb3;">add</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">bfs</span>()))<br>        <span style="color: #f5deb3;">{</span><br>            <span style="color: #f5deb3;">add</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">10000006</span><br>            <span style="font-weight: bold; color: #b0c4de;">for</span>(<span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">=</span> (N<span style="color: #f5deb3;">+</span><span style="color: #add8e6;">1</span>);<span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">!=</span> <span style="color: #add8e6;">0</span><span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">pre</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">])</span><br>                <span style="color: #f5deb3;">{</span><br>                    <span style="color: #f5deb3;">j</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">pre</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">];</span><br>                    <span style="font-weight: bold; color: #b0c4de;">if</span>(<span style="color: #f5deb3;">graph</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">j</span><span style="color: #f5deb3;">][</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">&lt;</span> <span style="color: #f5deb3;">add</span>)<br>                        <span style="color: #f5deb3;">add</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">graph</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">j</span><span style="color: #f5deb3;">][</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">];</span><br>                <span style="color: #f5deb3;">}</span><br>            <span style="font-weight: bold; color: #b0c4de;">for</span>(<span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">=</span> (N<span style="color: #f5deb3;">+</span><span style="color: #add8e6;">1</span>);<span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">!=</span> <span style="color: #add8e6;">0</span><span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">pre</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">])</span><br>                <span style="color: #f5deb3;">{</span><br>                    <span style="color: #f5deb3;">j</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">pre</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">];</span><br>                    <span style="color: #f5deb3;">graph</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">j</span><span style="color: #f5deb3;">][</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">-=</span> <span style="color: #f5deb3;">add</span><br>                    <span style="color: #f5deb3;">graph</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">][</span><span style="color: #f5deb3;">j</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">+=</span> <span style="color: #f5deb3;">add</span><br>                <span style="color: #f5deb3;">}</span><br>            <span style="color: #f5deb3;">maxflow</span> <span style="color: #f5deb3;">+=</span> <span style="color: #f5deb3;">add</span><br>        <span style="color: #f5deb3;">}</span><br><span style="color: #f5deb3;">}</span><br><span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #ffffff;">main</span>(<span style="font-weight: bold; color: #98fb98;">void</span>)<br><span style="color: #f5deb3;">{</span><br>    <span style="color: #f5deb3;">freopen</span>(<span style="color: #7fffd4;">“24-1.in”</span><span style="color: #f5deb3;">,</span><span style="color: #7fffd4;">“r”</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">stdin</span>);<br>    <span style="color: #f5deb3;">freopen</span>(<span style="color: #7fffd4;">“24-1.out”</span><span style="color: #f5deb3;">,</span><span style="color: #7fffd4;">“w”</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">stdout</span>);<br>    <span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">j</span><span style="color: #f5deb3;">,</span>s<span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">e</span><br>    <span style="color: #f5deb3;">scanf</span>(<span style="color: #7fffd4;">“%d%d”</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;"></span><span style="color: #f5deb3;">M</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">&amp;</span>N);<br>    <span style="color: #f5deb3;">memset</span>(<span style="color: #f5deb3;">graph</span><span style="color: #f5deb3;">,</span><span style="color: #add8e6;">0</span><span style="color: #f5deb3;">,</span><span style="font-weight: bold; color: #b0c4de;">sizeof</span>(<span style="color: #f5deb3;">graph</span>));<br>    <span style="font-weight: bold; color: #b0c4de;">while</span>(<span style="color: #add8e6;">1</span>)<br>        <span style="color: #f5deb3;">{</span><br>            <span style="color: #f5deb3;">scanf</span>(<span style="color: #7fffd4;">“%d%d”</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;"></span>s<span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">&amp;</span><span style="color: #f5deb3;">e</span>);<br>            <span style="font-weight: bold; color: #b0c4de;">if</span>((<span style="color: #f5deb3;">-</span><span style="color: #add8e6;">1</span> <span style="color: #f5deb3;">==</span> s) <span style="color: #f5deb3;">&amp;</span> (<span style="color: #f5deb3;">-</span><span style="color: #add8e6;">1</span> <span style="color: #f5deb3;">==</span> <span style="color: #f5deb3;">e</span>))<br>                <span style="font-weight: bold; color: #b0c4de;">break</span><br>            <span style="font-weight: bold; color: #b0c4de;">if</span>(s <span style="color: #f5deb3;">&gt;</span> <span style="color: #f5deb3;">e</span>)<br>                <span style="color: #f5deb3;">{</span><span style="color: #da70d6;">//确定是从一个方向流往另外一个方向</span><br>                    <span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">=</span> s;<br>                    s <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">e</span><br>                    <span style="color: #f5deb3;">e</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">i</span><br>                <span style="color: #f5deb3;">}</span><br>            <span style="color: #f5deb3;">graph</span><span style="color: #f5deb3;">[</span>s<span style="color: #f5deb3;">][</span><span style="color: #f5deb3;">e</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">1</span><br>        <span style="color: #f5deb3;">}</span><br>    <span style="font-weight: bold; color: #b0c4de;">for</span>(<span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">1</span><span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">&lt;=</span> <span style="color: #f5deb3;">M</span>;<span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">++</span>)<span style="color: #da70d6;">//超级源点</span><br>        <span style="color: #f5deb3;">graph</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">0</span><span style="color: #f5deb3;">][</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">1</span><br>    <span style="font-weight: bold; color: #b0c4de;">for</span>(<span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">M</span><span style="color: #f5deb3;">+</span><span style="color: #add8e6;">1</span><span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">&lt;=</span> N;<span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">++</span>)<span style="color: #da70d6;">//超级汇点</span><br>        <span style="color: #f5deb3;">graph</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">][</span>N<span style="color: #f5deb3;">+</span><span style="color: #add8e6;">1</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">1</span><br>    <span style="color: #f5deb3;">max_flow</span>();<br>    <span style="font-weight: bold; color: #b0c4de;">if</span>(<span style="color: #add8e6;">0</span> <span style="color: #f5deb3;">==</span> <span style="color: #f5deb3;">maxflow</span>)<br>        <span style="color: #f5deb3;">{</span><br>            <span style="color: #f5deb3;">printf</span>(<span style="color: #7fffd4;">“No Solution</span><span style="color: #7fffd4;">\n</span><span style="color: #7fffd4;">“</span>);<br>        <span style="color: #f5deb3;">}</span><br>    <span style="font-weight: bold; color: #b0c4de;">else</span><br>        <span style="color: #f5deb3;">{</span><br>            <span style="color: #f5deb3;">printf</span>(<span style="color: #7fffd4;">“%d</span><span style="color: #7fffd4;">\n</span><span style="color: #7fffd4;">“</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">maxflow</span>);<br>            <span style="font-weight: bold; color: #b0c4de;">for</span>(<span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">1</span><span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">&lt;=</span> <span style="color: #f5deb3;">M</span>;<span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">++</span>)<br>                <span style="color: #f5deb3;">{</span><br>                    <span style="font-weight: bold; color: #b0c4de;">for</span>(<span style="color: #f5deb3;">j</span> <span style="color: #f5deb3;">=</span> (<span style="color: #f5deb3;">M</span><span style="color: #f5deb3;">+</span><span style="color: #add8e6;">1</span>);<span style="color: #f5deb3;">j</span> <span style="color: #f5deb3;">&lt;=</span> N;<span style="color: #f5deb3;">j</span><span style="color: #f5deb3;">++</span>)<br>                        <span style="color: #f5deb3;">{</span><br>                            <span style="font-weight: bold; color: #b0c4de;">if</span>(<span style="color: #f5deb3;">graph</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">j</span><span style="color: #f5deb3;">][</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">==</span> <span style="color: #add8e6;">1</span>)<br>                                <span style="color: #f5deb3;">{</span><br>                                    <span style="color: #f5deb3;">printf</span>(<span style="color: #7fffd4;">“%d %d</span><span style="color: #7fffd4;">\n</span><span style="color: #7fffd4;">“</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">j</span>);<br>                                <span style="color: #da70d6;">//这里的输出注意下 附数据如下</span><br>                                <span style="color: #da70d6;">//2 4</span><br>                                <span style="color: #da70d6;">//1 3</span><br>                                <span style="color: #da70d6;">//1 4</span><br>                                <span style="color: #da70d6;">//2 3</span><br>                                <span style="color: #da70d6;">//-1 -1</span><br>                                <span style="color: #f5deb3;">}</span><br>                        <span style="color: #f5deb3;">}</span><br>                <span style="color: #f5deb3;">}</span><br>        <span style="color: #f5deb3;">}</span><br>    <span style="font-weight: bold; color: #b0c4de;">return</span> <span style="color: #add8e6;">0</span><br><span style="color: #f5deb3;">}</span></div>

	
	</div>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2011-02-10 </div>
			<div class="article-title"><a href="/2011/02/10/usaco-4-2-1-drainage-ditches/" >USACO 4-2-1Drainage Ditches</a></div>						
		</h3>
	


			  <div class="entry">
  <div class="row">
	
	
		<p><a href="http://www.nocow.cn/index.php/Translate:USACO/ditch" target="_blank" rel="external">题目翻译</a></p>
<p>一个入门的网络流题目,由于点和边都不多,所以我用了原始的EK算法(其实当时我也只会这最原始的算法),也就是每次用bfs找增广路,复杂度是O(V*E^2)。下面直接给出代码</p>
<div class="source" style="color: #f5deb3; font-family: 'Courier New','Lucida Console','monospace'; background-color: #2f4f4f;"><span style="color: #da70d6;">/<em></em></span><br><span style="color: #da70d6;">  LANG:C</span><br><span style="color: #da70d6;">  TASK:ditch</span><br><span style="color: #da70d6;">  ID:qcx97811</span><br><span style="color: #da70d6;">/</span><br><span style="color: #eeee00;">#include <stdio.h></stdio.h></span><br><span style="color: #eeee00;">#include <stdlib.h></stdlib.h></span><br><span style="color: #eeee00;">#include <string.h></string.h></span><br><br><span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">graph</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">206</span><span style="color: #f5deb3;">][</span><span style="color: #add8e6;">206</span><span style="color: #f5deb3;">],</span><span style="color: #f5deb3;">pre</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">206</span><span style="color: #f5deb3;">];</span><span style="color: #da70d6;">//graph是原图,pre是用来存每个点的前驱的</span><br><span style="font-weight: bold; color: #98fb98;">int</span> N<span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">M</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">maxflow</span><span style="color: #da70d6;">//N和M是题中的 maxlfow就是结果了</span><br><br><span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #ffffff;">bfs</span>()<br><span style="color: #f5deb3;">{</span><br>    <span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">j</span><br>    <span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">q</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">206</span><span style="color: #f5deb3;">];</span><br>    <span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">front</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">rear</span><br>    <span style="color: #f5deb3;">memset</span>(<span style="color: #f5deb3;">pre</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">-</span><span style="color: #add8e6;">1</span><span style="color: #f5deb3;">,</span><span style="font-weight: bold; color: #b0c4de;">sizeof</span>(<span style="color: #f5deb3;">pre</span>));<br>    <span style="color: #f5deb3;">front</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">rear</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">-</span><span style="color: #add8e6;">1</span><br>    <span style="color: #f5deb3;">q</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">++</span><span style="color: #f5deb3;">rear</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">1</span><br>    <span style="font-weight: bold; color: #b0c4de;">while</span>(<span style="color: #f5deb3;">front</span> <span style="color: #f5deb3;">&lt;</span> <span style="color: #f5deb3;">rear</span>)<span style="color: #da70d6;">//bfs找一条从源点到汇点的路径</span><br>        <span style="color: #f5deb3;">{</span><br>            <span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">q</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">++</span><span style="color: #f5deb3;">front</span><span style="color: #f5deb3;">];</span><br>            <span style="font-weight: bold; color: #b0c4de;">for</span>(<span style="color: #f5deb3;">j</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">1</span><span style="color: #f5deb3;">j</span> <span style="color: #f5deb3;">&lt;=</span> <span style="color: #f5deb3;">M</span>;<span style="color: #f5deb3;">j</span><span style="color: #f5deb3;">++</span>)<br>                <span style="color: #f5deb3;">{</span><br>                    <span style="font-weight: bold; color: #b0c4de;">if</span>(<span style="color: #f5deb3;">-</span><span style="color: #add8e6;">1</span> <span style="color: #f5deb3;">==</span> <span style="color: #f5deb3;">pre</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">j</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">&amp;</span> <span style="color: #f5deb3;">graph</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">][</span><span style="color: #f5deb3;">j</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">&gt;</span> <span style="color: #add8e6;">0</span>)<br>                        <span style="color: #f5deb3;">{</span><span style="color: #da70d6;">//如果当前点没有没用而且可用</span><br>                            <span style="color: #f5deb3;">pre</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">j</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">i</span><br>                            <span style="color: #f5deb3;">rear</span><span style="color: #f5deb3;">++</span><br>                            <span style="color: #f5deb3;">q</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">rear</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">j</span><br>                            <span style="font-weight: bold; color: #b0c4de;">if</span>(<span style="color: #f5deb3;">j</span> <span style="color: #f5deb3;">==</span> <span style="color: #f5deb3;">M</span>)<span style="color: #da70d6;">//如果已经到了汇点 也就是已经找到一条增广路径</span><br>                                <span style="font-weight: bold; color: #b0c4de;">return</span> <span style="color: #add8e6;">1</span><br>                        <span style="color: #f5deb3;">}</span><br>                <span style="color: #f5deb3;">}</span><br>        <span style="color: #f5deb3;">}</span><br>    <span style="font-weight: bold; color: #b0c4de;">return</span> <span style="color: #add8e6;">0</span><br><span style="color: #f5deb3;">}</span><br><span style="font-weight: bold; color: #98fb98;">void</span> <span style="color: #ffffff;">max_flow</span>()<br><span style="color: #f5deb3;">{</span><br>    <span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">j</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">add</span><br>    <span style="color: #f5deb3;">maxflow</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">0</span><br>    <span style="font-weight: bold; color: #b0c4de;">while</span>(<span style="color: #add8e6;">0</span> <span style="color: #f5deb3;">!=</span> (<span style="color: #f5deb3;">add</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">bfs</span>()))<br>        <span style="color: #f5deb3;">{</span><span style="color: #da70d6;">//如果还有增广路径</span><br>            <span style="color: #f5deb3;">add</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">10000006</span><br>            <span style="font-weight: bold; color: #b0c4de;">for</span>(<span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">M</span><span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">!=</span> <span style="color: #add8e6;">1</span>;<span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">pre</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">])</span><br>                <span style="color: #f5deb3;">{</span><span style="color: #da70d6;">//找出本次能增广的最大流量</span><br>                    <span style="color: #f5deb3;">j</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">pre</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">];</span><br>                    <span style="font-weight: bold; color: #b0c4de;">if</span>(<span style="color: #f5deb3;">graph</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">j</span><span style="color: #f5deb3;">][</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">&lt;</span> <span style="color: #f5deb3;">add</span>)<br>                        <span style="color: #f5deb3;">add</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">graph</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">j</span><span style="color: #f5deb3;">][</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">];</span><br>                <span style="color: #f5deb3;">}</span><br>            <span style="font-weight: bold; color: #b0c4de;">for</span>(<span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">M</span><span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">!=</span> <span style="color: #add8e6;">1</span>;<span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">pre</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">])</span><br>                <span style="color: #f5deb3;">{</span><span style="color: #da70d6;">//改变残留网络</span><br>                    <span style="color: #f5deb3;">j</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">pre</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">];</span><br>                    <span style="color: #f5deb3;">graph</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">j</span><span style="color: #f5deb3;">][</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">-=</span> <span style="color: #f5deb3;">add</span><br>                    <span style="color: #f5deb3;">graph</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">][</span><span style="color: #f5deb3;">j</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">+=</span> <span style="color: #f5deb3;">add</span><br>                <span style="color: #f5deb3;">}</span><br>            <span style="color: #f5deb3;">maxflow</span> <span style="color: #f5deb3;">+=</span> <span style="color: #f5deb3;">add</span><span style="color: #da70d6;">//更改结果</span><br>        <span style="color: #f5deb3;">}</span><br><span style="color: #f5deb3;">}</span><br><span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #ffffff;">main</span>(<span style="font-weight: bold; color: #98fb98;">void</span>)<br><span style="color: #f5deb3;">{</span><br>    <span style="color: #f5deb3;">freopen</span>(<span style="color: #7fffd4;">“ditch.in”</span><span style="color: #f5deb3;">,</span><span style="color: #7fffd4;">“r”</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">stdin</span>);<br>    <span style="color: #f5deb3;">freopen</span>(<span style="color: #7fffd4;">“ditch.out”</span><span style="color: #f5deb3;">,</span><span style="color: #7fffd4;">“w”</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">stdout</span>);<br>    <span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">,</span>s<span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">e</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">c</span><br>    <span style="color: #f5deb3;">scanf</span>(<span style="color: #7fffd4;">“%d%d”</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;"></span>N<span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">&amp;</span><span style="color: #f5deb3;">M</span>);<br>    <span style="color: #f5deb3;">memset</span>(<span style="color: #f5deb3;">graph</span><span style="color: #f5deb3;">,</span><span style="color: #add8e6;">0</span><span style="color: #f5deb3;">,</span><span style="font-weight: bold; color: #b0c4de;">sizeof</span>(<span style="color: #f5deb3;">graph</span>));<br>    <span style="color: #da70d6;">//下面是建图</span><br>    <span style="font-weight: bold; color: #b0c4de;">for</span>(<span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">0</span><span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">&lt;</span> N;<span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">++</span>)<br>        <span style="color: #f5deb3;">{</span><br>            <span style="color: #f5deb3;">scanf</span>(<span style="color: #7fffd4;">“%d%d%d”</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;"></span>s<span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">&amp;</span><span style="color: #f5deb3;">e</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">&amp;</span><span style="color: #f5deb3;">c</span>);<br>            <span style="color: #f5deb3;">graph</span><span style="color: #f5deb3;">[</span>s<span style="color: #f5deb3;">][</span><span style="color: #f5deb3;">e</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">+=</span> <span style="color: #f5deb3;">c</span><br>        <span style="color: #f5deb3;">}</span><br>    <span style="color: #f5deb3;">max_flow</span>();<span style="color: #da70d6;">//调用max_flow得到结果</span><br>    <span style="color: #f5deb3;">printf</span>(<span style="color: #7fffd4;">“%d</span><span style="color: #7fffd4;">\n</span><span style="color: #7fffd4;">“</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">maxflow</span>);<br>    <span style="font-weight: bold; color: #b0c4de;">return</span> <span style="color: #add8e6;">0</span><br><span style="color: #f5deb3;">}</span></div>

	
	</div>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2011-02-10 </div>
			<div class="article-title"><a href="/2011/02/10/usaco-4-1-2-fence-rails/" >USACO 4-1-2 Fence Rails</a></div>						
		</h3>
	


			  <div class="entry">
  <div class="row">
	
	
		<p><a href="http://www.nocow.cn/index.php/Translate:USACO/fence8" target="_blank" rel="external">题目翻译</a></p>
<p>这题一开始不知如何下手,后来参考了nocow和其他大牛的才写出来的.这里就给出nocow的分析再贴上代码,这题说是dfs-id算法,可是我怎么看都觉得是一般的dfs然后加剪枝.</p>
<p>nocow分析<a href="http://www.nocow.cn/index.php/USACO/fence8" target="_blank" rel="external">见这里</a></p>
<p>下面是我的代码:</p>
<div class="source" style="color: #f5deb3; font-family: 'Courier New','Lucida Console','monospace'; background-color: #2f4f4f;"><span style="color: #da70d6;">/<em></em></span><br><span style="color: #da70d6;">  ID:qcx97811</span><br><span style="color: #da70d6;">  LANG:C</span><br><span style="color: #da70d6;">  TASK:fence8</span><br><span style="color: #da70d6;">/</span><br><span style="color: #eeee00;">#include <stdio.h></stdio.h></span><br><span style="color: #eeee00;">#include <stdlib.h></stdlib.h></span><br><br><span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">board</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">56</span><span style="color: #f5deb3;">],</span><span style="color: #f5deb3;">rail</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">1026</span><span style="color: #f5deb3;">],</span><span style="color: #f5deb3;">rail_sum</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">1026</span><span style="color: #f5deb3;">];</span><br><span style="font-weight: bold; color: #98fb98;">int</span> N<span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">R</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">bsum</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">up</span><br><br><span style="color: #da70d6;">//排序用的模板</span><br><span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #ffffff;">cmp</span>(<span style="font-weight: bold; color: #b0c4de;">const</span> <span style="font-weight: bold; color: #98fb98;">void</span> <span style="color: #f5deb3;"><em></em></span><span style="color: #f5deb3;">a</span><span style="color: #f5deb3;">,</span><span style="font-weight: bold; color: #b0c4de;">const</span> <span style="font-weight: bold; color: #98fb98;">void</span> <span style="color: #f5deb3;"></span>b)<br><span style="color: #f5deb3;">{</span><br>    <span style="font-weight: bold; color: #b0c4de;">if</span>(<span style="color: #f5deb3;"><em></em></span>(<span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;"></span>)<span style="color: #f5deb3;">a</span> <span style="color: #f5deb3;">&gt;</span> <span style="color: #f5deb3;"><em></em></span>(<span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;"></span>)b)<br>        <span style="font-weight: bold; color: #b0c4de;">return</span> <span style="color: #add8e6;">1</span><br>    <span style="font-weight: bold; color: #b0c4de;">if</span>(<span style="color: #f5deb3;"><em></em></span>(<span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;"></span>)<span style="color: #f5deb3;">a</span> <span style="color: #f5deb3;">==</span> <span style="color: #f5deb3;"><em></em></span>(<span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;"></span>)b)<br>        <span style="font-weight: bold; color: #b0c4de;">return</span> <span style="color: #add8e6;">0</span><br>    <span style="font-weight: bold; color: #b0c4de;">return</span> <span style="color: #f5deb3;">-</span><span style="color: #add8e6;">1</span><br><span style="color: #f5deb3;">}</span><br><br><span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #ffffff;">work</span>(<span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">total</span><span style="color: #f5deb3;">,</span><span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">rstart</span><span style="color: #f5deb3;">,</span><span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">bstart</span>)<br><span style="color: #f5deb3;">{</span><span style="color: #da70d6;">//total是到当前已经浪费掉的木板长度</span><br><span style="color: #da70d6;">//rstart更准确的是rend也就是当前的最大rail下标 因为是从大到小</span><br><span style="color: #da70d6;">//bstart是当前从哪块board开始的</span><br>    <span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">i</span><br>    <span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">t_bstart</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">t_total</span><br>    <span style="color: #f5deb3;">t_total</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">0</span><br>    <span style="font-weight: bold; color: #b0c4de;">if</span>(<span style="color: #f5deb3;">-</span><span style="color: #add8e6;">1</span> <span style="color: #f5deb3;">==</span> <span style="color: #f5deb3;">rstart</span>)<span style="color: #da70d6;">//表示搜索已经结束了</span><br>        <span style="font-weight: bold; color: #b0c4de;">return</span> <span style="color: #add8e6;">1</span><br>    <span style="font-weight: bold; color: #b0c4de;">for</span>(<span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">=</span> N<span style="color: #f5deb3;">-</span><span style="color: #add8e6;">1</span><span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">&gt;;=</span> <span style="color: #f5deb3;">bstart</span>;<span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">–</span>)<br>        <span style="color: #f5deb3;">{</span><span style="color: #da70d6;">//搜索 从大到小</span><br>            <span style="font-weight: bold; color: #b0c4de;">if</span>(<span style="color: #f5deb3;">board</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">&gt;=</span> <span style="color: #f5deb3;">rail</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">rstart</span><span style="color: #f5deb3;">])</span><br>                <span style="color: #f5deb3;">{</span><span style="color: #da70d6;">//如果可以从这个board上切的话</span><br>                    <span style="color: #f5deb3;">board</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">-=</span> <span style="color: #f5deb3;">rail</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">rstart</span><span style="color: #f5deb3;">];</span><span style="color: #da70d6;">//更新board</span><br>                    <span style="font-weight: bold; color: #b0c4de;">if</span>(<span style="color: #f5deb3;">board</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">&lt;</span> <span style="color: #f5deb3;">rail</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">0</span><span style="color: #f5deb3;">])</span><br>                        <span style="color: #f5deb3;">{</span><span style="color: #da70d6;">//如果这个board已经不可能再切出其他rail了</span><br>                            <span style="color: #f5deb3;">t_total</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">total</span><span style="color: #f5deb3;">+</span><span style="color: #f5deb3;">board</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">];</span><span style="color: #da70d6;">//更新浪费的board总数</span><br>                            <span style="font-weight: bold; color: #b0c4de;">if</span>(<span style="color: #f5deb3;">t_total</span><span style="color: #f5deb3;">+</span><span style="color: #f5deb3;">rail_sum</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">up</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">&gt;</span> <span style="color: #f5deb3;">bsum</span>)<br>                                <span style="color: #f5deb3;">{</span><span style="color: #da70d6;">//如果已经不可能切出up+1[搜索的是下标]个rail</span><br>                                    <span style="color: #f5deb3;">board</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">+=</span> <span style="color: #f5deb3;">rail</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">rstart</span><span style="color: #f5deb3;">];</span><span style="color: #da70d6;">//回溯</span><br>                                    <span style="font-weight: bold; color: #b0c4de;">continue</span><span style="color: #da70d6;">//进行下次个搜索</span><br>                                <span style="color: #f5deb3;">}</span><br>                        <span style="color: #f5deb3;">}</span><br>                    <span style="font-weight: bold; color: #b0c4de;">else</span><br>                        <span style="color: #f5deb3;">t_total</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">total</span><span style="color: #da70d6;">//浪费的board</span><br>                    <span style="font-weight: bold; color: #b0c4de;">if</span>(<span style="color: #f5deb3;">rstart</span> <span style="color: #f5deb3;">&gt;</span> <span style="color: #add8e6;">0</span> <span style="color: #f5deb3;">&amp;</span> (<span style="color: #f5deb3;">rail</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">rstart</span><span style="color: #f5deb3;">-</span><span style="color: #add8e6;">1</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">==</span> <span style="color: #f5deb3;">rail</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">rstart</span><span style="color: #f5deb3;">]))</span><br>                        <span style="color: #f5deb3;">t_bstart</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">i</span><span style="color: #da70d6;">//如果下一块rail和当前的rail相等</span><br>                    <span style="color: #da70d6;">//那么下一块rail所对应的board一定比当前rail所对应的</span><br>                    <span style="color: #da70d6;">//board的下标要大 至少不会小</span><br>                    <span style="font-weight: bold; color: #b0c4de;">else</span><br>                        <span style="color: #f5deb3;">t_bstart</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">0</span><span style="color: #da70d6;">//board的最小下标为0 这里不用考虑某块board已经被用 因为每次都会更新board的大小</span><br>                    <span style="font-weight: bold; color: #b0c4de;">if</span>(<span style="color: #add8e6;">1</span> <span style="color: #f5deb3;">==</span> <span style="color: #f5deb3;">work</span>(<span style="color: #f5deb3;">t_total</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">rstart</span><span style="color: #f5deb3;">-</span><span style="color: #add8e6;">1</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">t_bstart</span>))<br>                        <span style="font-weight: bold; color: #b0c4de;">return</span> <span style="color: #add8e6;">1</span><span style="color: #da70d6;">//如果搜索成功的话 就返回成功</span><br>                    <span style="color: #f5deb3;">board</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">+=</span> <span style="color: #f5deb3;">rail</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">rstart</span><span style="color: #f5deb3;">];</span><br>                <span style="color: #f5deb3;">}</span><br>        <span style="color: #f5deb3;">}</span><br>    <span style="font-weight: bold; color: #b0c4de;">return</span> <span style="color: #add8e6;">0</span><br><span style="color: #f5deb3;">}</span><br><span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #ffffff;">main</span>(<span style="font-weight: bold; color: #98fb98;">void</span>)<br><span style="color: #f5deb3;">{</span><br>    <span style="color: #f5deb3;">freopen</span>(<span style="color: #7fffd4;">“fence8.in”</span><span style="color: #f5deb3;">,</span><span style="color: #7fffd4;">“r”</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">stdin</span>);<br>    <span style="color: #f5deb3;">freopen</span>(<span style="color: #7fffd4;">“fence8.out”</span><span style="color: #f5deb3;">,</span><span style="color: #7fffd4;">“w”</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">stdout</span>);<br>    <span style="font-weight: bold; color: #98fb98;">int</span> <span style="color: #f5deb3;">i</span><br>    <span style="color: #f5deb3;">scanf</span>(<span style="color: #7fffd4;">“%d”</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;"></span>N);<span style="color: #da70d6;">//N是board的数目</span><br>    <span style="color: #f5deb3;">bsum</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">0</span><span style="color: #da70d6;">//bsum用来记录所有board的总和 用于一个小剪枝</span><br>    <span style="font-weight: bold; color: #b0c4de;">for</span>(<span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">0</span><span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">&lt;</span> N;<span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">++</span>)<br>        <span style="color: #f5deb3;">{</span><br>            <span style="color: #f5deb3;">scanf</span>(<span style="color: #7fffd4;">“%d”</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;"></span><span style="color: #f5deb3;">board</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">]);</span><br>            <span style="color: #f5deb3;">bsum</span> <span style="color: #f5deb3;">+=</span> <span style="color: #f5deb3;">board</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">];</span><br>        <span style="color: #f5deb3;">}</span><br>    <span style="color: #f5deb3;">scanf</span>(<span style="color: #7fffd4;">“%d”</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;"></span><span style="color: #f5deb3;">R</span>);<span style="color: #da70d6;">//R是rail的的总数</span><br>    <span style="font-weight: bold; color: #b0c4de;">for</span>(<span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">0</span><span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">&lt;</span> <span style="color: #f5deb3;">R</span>;<span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">++</span>)<br>        <span style="color: #f5deb3;">{</span><br>            <span style="color: #f5deb3;">scanf</span>(<span style="color: #7fffd4;">“%d”</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;"></span><span style="color: #f5deb3;">rail</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">]);</span><br>        <span style="color: #f5deb3;">}</span><br>    <span style="color: #f5deb3;">qsort</span>(<span style="color: #f5deb3;">board</span><span style="color: #f5deb3;">,</span>N<span style="color: #f5deb3;">,</span><span style="font-weight: bold; color: #b0c4de;">sizeof</span>(<span style="color: #f5deb3;">board</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">0</span><span style="color: #f5deb3;">]),</span><span style="color: #f5deb3;">cmp</span>);<br>    <span style="color: #f5deb3;">qsort</span>(<span style="color: #f5deb3;">rail</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">R</span><span style="color: #f5deb3;">,</span><span style="font-weight: bold; color: #b0c4de;">sizeof</span>(<span style="color: #f5deb3;">rail</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">0</span><span style="color: #f5deb3;">]),</span><span style="color: #f5deb3;">cmp</span>);<br>    <span style="color: #da70d6;">//对board数组和rail数组进行从小到大的排序</span><br>    <span style="color: #da70d6;">//下面的rail_sum数组表示从rail[0]加到rail[i]的总和 也是用于剪枝    </span><br>    <span style="color: #f5deb3;">rail_sum</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">0</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">rail</span><span style="color: #f5deb3;">[</span><span style="color: #add8e6;">0</span><span style="color: #f5deb3;">];</span><br>    <span style="font-weight: bold; color: #b0c4de;">for</span>(<span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">=</span> <span style="color: #add8e6;">1</span><span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">&lt;</span> <span style="color: #f5deb3;">R</span>;<span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">++</span>)<br>        <span style="color: #f5deb3;">{</span><br>            <span style="color: #f5deb3;">rail_sum</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">rail_sum</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">-</span><span style="color: #add8e6;">1</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">+</span> <span style="color: #f5deb3;">rail</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">i</span><span style="color: #f5deb3;">];</span><br>        <span style="color: #f5deb3;">}</span><br>    <span style="color: #f5deb3;">up</span> <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">R</span><span style="color: #f5deb3;">-</span><span style="color: #add8e6;">1</span><span style="color: #da70d6;">//up是有可能的最大下标</span><br>    <span style="font-weight: bold; color: #b0c4de;">while</span>(<span style="color: #f5deb3;">rail_sum</span><span style="color: #f5deb3;">[</span><span style="color: #f5deb3;">up</span><span style="color: #f5deb3;">]</span> <span style="color: #f5deb3;">&gt;</span> <span style="color: #f5deb3;">bsum</span>)<br>        <span style="color: #f5deb3;">up</span><span style="color: #f5deb3;">–</span><br><span style="color: #eeee00;">#if 0</span><br><span style="color: #da70d6;">    用于调试</span><br><span style="color: #da70d6;">    printf(“%d\n”,up);</span><br><span style="color: #eeee00;">#endif</span><br>    <span style="font-weight: bold; color: #b0c4de;">while</span>(<span style="color: #add8e6;">0</span> <span style="color: #f5deb3;">==</span> <span style="color: #f5deb3;">work</span>(<span style="color: #add8e6;">0</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">up</span><span style="color: #f5deb3;">,</span><span style="color: #add8e6;">0</span>))<span style="color: #da70d6;">//搜索结果</span><br>        <span style="color: #f5deb3;">up</span><span style="color: #f5deb3;">–</span><br>    <span style="color: #f5deb3;">printf</span>(<span style="color: #7fffd4;">“%d</span><span style="color: #7fffd4;">\n</span><span style="color: #7fffd4;">“</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">up</span><span style="color: #f5deb3;">+</span><span style="color: #add8e6;">1</span>);<span style="color: #da70d6;">//由于搜索出来的是下标 所以结果得+1</span><br>    <span style="font-weight: bold; color: #b0c4de;">return</span> <span style="color: #add8e6;">0</span><br><span style="color: #f5deb3;">}</span></div>

	
	</div>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2010-12-31 </div>
			<div class="article-title"><a href="/2010/12/31/linux-fork-2/" >Linux-fork(2)</a></div>						
		</h3>
	


			  <div class="entry">
  <div class="row">
	
	
		<p>由于这篇会比较长,所以就不接在上一篇后面了,在此再开一篇.这里说说和fork有关的两个比较有趣的程序</p>
<p>第一个是这样的[一组,一共两个程序对比]</p>
<p><div class="source" style="color: #f5deb3; background-color: #2f4f4f; font-family: 'Courier New', 'Lucida Console', Verdana;"><span style="color: #eeee00;">#include <unistd.h>;</unistd.h></span><br><span style="color: #eeee00;">#include <sys types.h="">;</sys></span><br><span style="color: #98fb98; font-weight: bold;">int</span> <span style="color: #ffffff;">main</span> ()<br><span style="color: #f5deb3;">{</span><br><span style="color: #f5deb3;">pid_t</span> <span style="color: #f5deb3;">pid</span><br><span style="color: #f5deb3;">printf</span>(<span style="color: #f5deb3;">“</span><span style="color: #f5deb3;">fork</span><span style="color: #f5deb3;">”</span>);<span style="color: #da70d6;">//注意这句和下面的区别</span><br><span style="color: #f5deb3;">pid</span><span style="color: #f5deb3;">=</span><span style="color: #f5deb3;">fork</span>();<br><span style="color: #b0c4de; font-weight: bold;">if</span> (<span style="color: #f5deb3;">pid</span> <span style="color: #f5deb3;">&lt;</span> <span style="color: #add8e6;">0</span>)<br><span style="color: #f5deb3;">printf</span>(<span style="color: #f5deb3;">“</span><span style="color: #f5deb3;">error</span> <span style="color: #f5deb3;">in</span> <span style="color: #f5deb3;">fork</span><span style="color: #f5deb3;">!</span><span style="color: #f5deb3;">”</span>);<br><span style="color: #b0c4de; font-weight: bold;">else</span> <span style="color: #b0c4de; font-weight: bold;">if</span> (<span style="color: #f5deb3;">pid</span> <span style="color: #f5deb3;">==</span> <span style="color: #add8e6;">0</span>)<br><span style="color: #f5deb3;">printf</span>(<span style="color: #f5deb3;">“</span><span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">am</span> <span style="color: #f5deb3;">the</span> <span style="color: #f5deb3;">child</span> <span style="color: #f5deb3;">process</span><span style="color: #f5deb3;">,</span> <span style="color: #f5deb3;">my</span> <span style="color: #f5deb3;">process</span> <span style="color: #f5deb3;">id</span> <span style="color: #f5deb3;">is</span> <span style="color: #f5deb3;">%</span><span style="color: #f5deb3;">dn</span><span style="color: #f5deb3;">”</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">getpid</span>());<br><span style="color: #b0c4de; font-weight: bold;">else</span><br><span style="color: #f5deb3;">printf</span>(<span style="color: #f5deb3;">“</span><span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">am</span> <span style="color: #f5deb3;">the</span> <span style="color: #f5deb3;">parent</span> <span style="color: #f5deb3;">process</span><span style="color: #f5deb3;">,</span> <span style="color: #f5deb3;">my</span> <span style="color: #f5deb3;">process</span> <span style="color: #f5deb3;">id</span> <span style="color: #f5deb3;">is</span> <span style="color: #f5deb3;">%</span><span style="color: #f5deb3;">dn</span><span style="color: #f5deb3;">”</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">getpid</span>());<br><span style="color: #f5deb3;">retrun</span> <span style="color: #add8e6;">0</span><br><span style="color: #f5deb3;">}</span><br><span style="color: #eeee00;">#include <unistd.h>;</unistd.h></span><br><span style="color: #eeee00;">#include <sys types.h="">;</sys></span><br><span style="color: #98fb98; font-weight: bold;">int</span> <span style="color: #ffffff;">main</span> ()<br><span style="color: #f5deb3;">{</span><br><span style="color: #f5deb3;">pid_t</span> <span style="color: #f5deb3;">pid</span><br><span style="color: #f5deb3;">printf</span>(<span style="color: #f5deb3;">“</span><span style="color: #f5deb3;">fork</span><span style="color: #f5deb3;">\</span>n<span style="color: #f5deb3;">”</span>);<span style="color: #da70d6;">//注意这句和下面的区别</span><br><span style="color: #f5deb3;">pid</span><span style="color: #f5deb3;">=</span><span style="color: #f5deb3;">fork</span>();<br><span style="color: #b0c4de; font-weight: bold;">if</span> (<span style="color: #f5deb3;">pid</span> <span style="color: #f5deb3;">&lt;</span> <span style="color: #add8e6;">0</span>)<br><span style="color: #f5deb3;">printf</span>(<span style="color: #f5deb3;">“</span><span style="color: #f5deb3;">error</span> <span style="color: #f5deb3;">in</span> <span style="color: #f5deb3;">fork</span><span style="color: #f5deb3;">!</span><span style="color: #f5deb3;">”</span>);<br><span style="color: #b0c4de; font-weight: bold;">else</span> <span style="color: #b0c4de; font-weight: bold;">if</span> (<span style="color: #f5deb3;">pid</span> <span style="color: #f5deb3;">==</span> <span style="color: #add8e6;">0</span>)<br><span style="color: #f5deb3;">printf</span>(<span style="color: #f5deb3;">“</span><span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">am</span> <span style="color: #f5deb3;">the</span> <span style="color: #f5deb3;">child</span> <span style="color: #f5deb3;">process</span><span style="color: #f5deb3;">,</span> <span style="color: #f5deb3;">my</span> <span style="color: #f5deb3;">process</span> <span style="color: #f5deb3;">id</span> <span style="color: #f5deb3;">is</span> <span style="color: #f5deb3;">%</span><span style="color: #f5deb3;">dn</span><span style="color: #f5deb3;">”</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">getpid</span>());<br><span style="color: #b0c4de; font-weight: bold;">else</span><br><span style="color: #f5deb3;">printf</span>(<span style="color: #f5deb3;">“</span><span style="color: #f5deb3;">i</span> <span style="color: #f5deb3;">am</span> <span style="color: #f5deb3;">the</span> <span style="color: #f5deb3;">parent</span> <span style="color: #f5deb3;">process</span><span style="color: #f5deb3;">,</span> <span style="color: #f5deb3;">my</span> <span style="color: #f5deb3;">process</span> <span style="color: #f5deb3;">id</span> <span style="color: #f5deb3;">is</span> <span style="color: #f5deb3;">%</span><span style="color: #f5deb3;">dn</span><span style="color: #f5deb3;">”</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">getpid</span>());<br><span style="color: #b0c4de; font-weight: bold;">return</span> <span style="color: #add8e6;">0</span><br><span style="color: #f5deb3;">}</span></div><br>上面的两个会输出什么呢?</p>
<p>。</p>
<p>。</p>
<p>。</p>
<p>。</p>
<p>答案是</p>
<p>第一个输出:</p>
<p>forki am the child process, my process id is 2955</p>
<p>forki am the child process, my process id is 2954</p>
<p>第二个的输出是</p>
<p>fork</p>
<p>i am the child process, my process id is 2955</p>
<p>i am the child process, my process id is 2954</p>
<p>是不是觉得和我昨天说的不一样呢?怎么第一个中的fork输出两次呢？这里就和printf的缓冲有关了,具体的可以<a href="http://bbs.chinaunix.net/viewthread.php?tid=311067" target="_blank" rel="external"><span style="color: #ff0000;">参考这里</span></a></p>
<p>下面的是<a href="http://www.cppblog.com/zhangxu/archive/2007/12/02/37640.aspx" target="_blank" rel="external"><span style="color: #ff0000;">转自这里</span></a></p>
<p>我试验了下,结果和博主的相似.</p>
<p>.给你两分钟抢答时间</p>
<p>.</p>
<p>.</p>
<p>.</p>
<p>.</p>
<p>.</p>
<p>.</p>
<p>.</p>
<p>.</p>
<p>OK,答案来了.</p>
<p>对一下答案吧：[这分析和结果是复制过来的.]</p>
<p>[hardy@localhost fork]$ ./fork<br>father<br>son<br>son<br>son<br>father<br>father<br>son<br>father<br>son<br>son<br>father<br>father<br>son<br>father<br>总共7个son7个father。你答对了么？</p>
<p>这道题需要在纸上画画才好理解[由于格式会不对,所以我用图片,速度不给力的还请见谅]</p>
<p><a href="http://www.klion26.com/wp-content/uploads/2010/12/fork-1.bmp" target="_blank" rel="external"><img src="http://www.klion26.com/wp-content/uploads/2010/12/fork-1.bmp" alt="" title="fork-1"></a></p>
<p>其中每一行分别代表一个进程的运行打印结果。</p>
<p>当产生子进程的时刻，子进程打印son，当子进程调用fork的生成子子进程，他就提升为father。<br>总结来说，father永远打印father，son在fork之前是son，fork之后就为father，同时生成新的son。<br>这个比喻就像真正的父子，孩子长大了生了小孩，孩子就成了父亲。而父亲永远是父亲。</p>
<p>我自己试验的时候的结果如下:</p>
<p><a href="http://www.klion26.com/wp-content/uploads/2010/12/fork.bmp" target="_blank" rel="external"><img src="http://www.klion26.com/wp-content/uploads/2010/12/fork.bmp" alt="" title="fork"></a></p>

	
	</div>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2010-12-30 </div>
			<div class="article-title"><a href="/2010/12/30/linux-fork-test/" >fork函数小测试</a></div>						
		</h3>
	


			  <div class="entry">
  <div class="row">
	
	
		<p>本篇文章还是beta版,由于本人对这个函数的了解还不是非常清晰,暂时只知道返回值有两个,返回两次.一个是,表示创建的子进程,一个是创建的子进程的id.如果返回-1表示创建失败,下面就不考虑了.下面的函数是测试用代码.</p>
<p>代码如下:</p>
<p><div class="source" style="background-color: #2f4f4f; font-family: 'Courier New','Consolas','Lucida Console'; color: #f5deb3;"><span style="color: #eeee00;">#include <stdio.h></stdio.h></span><br><span style="color: #eeee00;">#include <unistd.h></unistd.h></span><br><span style="color: #eeee00;">#include <systypes.h></systypes.h></span></div><br><span style="color: #98fb98; font-weight: bold;">int</span> <span style="color: #ffffff;">main</span>(<span style="color: #98fb98; font-weight: bold;">void</span>)<br><span style="color: #f5deb3;">{</span><br>    <span style="color: #98fb98; font-weight: bold;">int</span> p;<br>    <span style="color: #f5deb3;">printf</span>(<span style="color: #7fffd4;">“main——</span><span style="color: #7fffd4;">\n</span><span style="color: #7fffd4;">“</span>);<br>    p <span style="color: #f5deb3;">=</span> <span style="color: #f5deb3;">fork</span>();<span style="color: #da70d6;">//调用fork函数</span><br>    <span style="color: #f5deb3;">printf</span>(<span style="color: #7fffd4;">“after-fork<strong><em>*</em></strong></span><span style="color: #7fffd4;">\n</span><span style="color: #7fffd4;">“</span>);<br>    <span style="color: #b0c4de; font-weight: bold;">if</span>(<span style="color: #add8e6;">0</span> <span style="color: #f5deb3;">==</span> p)<br>       <span style="color: #f5deb3;">{</span><br>          <span style="color: #f5deb3;">printf</span>(<span style="color: #7fffd4;">“child  %d—–ppid-&gt;%d</span><span style="color: #7fffd4;">\n</span><span style="color: #7fffd4;">“</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">getpid</span><span style="color: #f5deb3;">(),</span><span style="color: #f5deb3;">getppid</span>());<br>       <span style="color: #f5deb3;">}</span><br>    <span style="color: #b0c4de; font-weight: bold;">else</span><br>       <span style="color: #f5deb3;">{</span><br>          <span style="color: #f5deb3;">printf</span>(<span style="color: #7fffd4;">“parent %d—</span><span style="color: #7fffd4;">\n</span><span style="color: #7fffd4;">“</span><span style="color: #f5deb3;">,</span><span style="color: #f5deb3;">getpid</span>());<br>       <span style="color: #f5deb3;">}</span><br>   <span style="color: #f5deb3;">printf</span>(<span style="color: #7fffd4;">“over—<em>*</em></span><span style="color: #7fffd4;">\n</span><span style="color: #7fffd4;">“</span>);<br>   <span style="color: #b0c4de; font-weight: bold;">return</span> <span style="color: #add8e6;">0</span><br><span style="color: #f5deb3;">}</span></p>
<p>结果如下:</p>
<p>main——</p>
<p>after-fork<strong><em>*</em></strong></p>
<p>child  2579—–ppid-&gt;2578</p>
<p>over—<em>*</em></p>
<p>after-fork<strong><em>*</em></strong></p>
<p>parent 2578—</p>
<p>over—<em>*</em></p>
<p>上述结果说明一些事情:首先是前面我说的.还有就是fork函数后面的都会被子进程和父进程都执行.还有一个是说这两个是并行的,也就是说可能先执行父进程再进行子进程,不过暂时结果没见过.等进一步了解之后,再来更新本篇文章.</p>

	
	</div>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2010-12-30 </div>
			<div class="article-title"><a href="/2010/12/30/wordpress-clickchar-plugin/" >wordpress之clickchar插件--不一样的提交按钮</a></div>						
		</h3>
	


			  <div class="entry">
  <div class="row">
	
	
		<pre><code>在[哑熊大牛](http://dumbear.com/blog/)的博客上看到这个插件,感觉很给力.于是就问了下,哑熊大牛一下就回复了.在此感谢下,哈哈.原来是个clickchar插件,话说这个插件不仅有提交按钮的作用,还有验证码的作用,而且样式也不错.于是就安装了,顺便在这推荐下。效果在本文的评论框下面
</code></pre><p>关于安装:wordpress 2.7以上版本可以直接在添加新插件那搜索clickchar就OK了,记得要设置API keys才可以用</p>

	
	</div>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2010-12-23 </div>
			<div class="article-title"><a href="/2010/12/23/linux-grub-encrypt/" >Linux Grub加密</a></div>						
		</h3>
	


			  <div class="entry">
  <div class="row">
	
	
		<p>上一篇文章中说到最好给grub也加密,由于我自己也没加密过,所以搜了下,方法如下 本人试验过可用<br>为grub密分为二种，一是明文，二是采用MD5算法的加密。<br>明文加密：编辑 grub.conf文件<br>vi /boot/grub/grub.conf 在default=0下面加一行 password=1234567890(这个就是明文密码)</p>
<p>MD5加密：先要命令 grub-md5-crypt计算出MD5的值，然后复制这个值到grub.conf文件中 password –md5$BYxEn$e5X/xOTS2pTpPPWtgIMhU1(这个就是用MD5加密后的值)<br>转载自：<a href="http://blog.csdn.net/magicbreaker/archive/2008/11/23/3357209.aspx" target="_blank" rel="external">http://blog.csdn.net/magicbreaker/archive/2008/11/23/3357209.aspx
</a>另外可以参照:<a href="http://linux.chinaitlab.com/safe/798285.html" target="_blank" rel="external">http://linux.chinaitlab.com/safe/798285.html</a>[说的比较好]</p>

	
	</div>
</div>

           
		

		</div>

		<!-- pagination -->
		<div>
  		<center>
		<div class="pagination">
<ul class="pagination">
	 
		
    	<li class="prev"><a href="/page/17/" class="alignleft prev"><i class="fa fa-arrow-circle-o-left"></i> Prev</a></li>
  		

        <li><a href="/"><i class="fa fa-home"></i>Home</a></li>

		
		   <li class="next"> <a href="/page/19/" class="alignright next">Next<i class="fa fa-arrow-circle-o-right"></i></a> </li>          
        
	
</ul>
</div>

  		</center>
		</div>

		
		
	</div> <!-- col-md-9 -->

	
		<div class="col-md-3">
	<div id="sidebar">
	
			
  <div id="site_search">
   <div class="form-group">
    <input type="text" id="local-search-input" name="q" results="0" placeholder="Search" class="st-search-input st-default-search-input form-control"/>
   </div>  
  <div id="local-search-result"></div>
  </div>


		
			
	<div class="widget">
		<h4>Categories</h4>
		<ul class="tag_box inline list-unstyled">
		
			<li><a href="/categories/ACM/">ACM<span>16</span></a></li>
		
			<li><a href="/categories/Algorithm/">Algorithm<span>14</span></a></li>
		
			<li><a href="/categories/HDU/">HDU<span>9</span></a></li>
		
			<li><a href="/categories/ACM/HDU/">HDU<span>1</span></a></li>
		
			<li><a href="/categories/Linux/">Linux<span>32</span></a></li>
		
			<li><a href="/categories/POJ/">POJ<span>6</span></a></li>
		
			<li><a href="/categories/Linux/TeX/">TeX<span>1</span></a></li>
		
			<li><a href="/categories/USACO/">USACO<span>21</span></a></li>
		
			<li><a href="/categories/Uncategorized/">Uncategorized<span>3</span></a></li>
		
			<li><a href="/categories/Visual-C/">Visual C++<span>1</span></a></li>
		
			<li><a href="/categories/实时计算/复盘/problem-solve/">problem_solve<span>1</span></a></li>
		
			<li><a href="/categories/wordpress/">wordpress<span>8</span></a></li>
		
			<li><a href="/categories/具体数学/">具体数学<span>2</span></a></li>
		
			<li><a href="/categories/分布式系统/">分布式系统<span>9</span></a></li>
		
			<li><a href="/categories/实时计算/复盘/">复盘<span>1</span></a></li>
		
			<li><a href="/categories/分布式系统/实时计算/">实时计算<span>5</span></a></li>
		
			<li><a href="/categories/实时计算/">实时计算<span>7</span></a></li>
		
			<li><a href="/categories/我的生活/想清楚/">想清楚<span>1</span></a></li>
		
			<li><a href="/categories/想清楚/">想清楚<span>2</span></a></li>
		
			<li><a href="/categories/成长/">成长<span>3</span></a></li>
		
			<li><a href="/categories/我的生活/">我的生活<span>9</span></a></li>
		
			<li><a href="/categories/所谓开源/">所谓开源<span>3</span></a></li>
		
			<li><a href="/categories/Algorithm/数学/">数学<span>1</span></a></li>
		
			<li><a href="/categories/POJ/数学/">数学<span>2</span></a></li>
		
			<li><a href="/categories/数学/">数学<span>2</span></a></li>
		
			<li><a href="/categories/分布式系统/实时计算/源码阅读/">源码阅读<span>1</span></a></li>
		
			<li><a href="/categories/源码阅读/">源码阅读<span>1</span></a></li>
		
			<li><a href="/categories/Linux/计算机图形学图像处理/">计算机图形学图像处理<span>1</span></a></li>
		
			<li><a href="/categories/计算机图形学图像处理/">计算机图形学图像处理<span>1</span></a></li>
		
			<li><a href="/categories/所谓开源/计算机基础/">计算机基础<span>1</span></a></li>
		
			<li><a href="/categories/Algorithm/计算机基础/">计算机基础<span>1</span></a></li>
		
			<li><a href="/categories/Linux/计算机基础/">计算机基础<span>2</span></a></li>
		
			<li><a href="/categories/语言学习/计算机基础/">计算机基础<span>1</span></a></li>
		
			<li><a href="/categories/计算机基础/">计算机基础<span>22</span></a></li>
		
			<li><a href="/categories/计算机安全/">计算机安全<span>3</span></a></li>
		
			<li><a href="/categories/计算机基础/语言学习/">语言学习<span>1</span></a></li>
		
			<li><a href="/categories/语言学习/">语言学习<span>2</span></a></li>
		
		</ul>
	</div>

		
			
	<div class="widget">
		<h4>Tag Cloud</h4>
		<ul class="tag_box inline list-unstyled">		
		
			<li><a href="/tags/于娟/">于娟<span>1</span></a></li>
		
			<li><a href="/tags/independent-sets-in-trees/">independent sets in trees<span>1</span></a></li>
		
			<li><a href="/tags/错误配置/">错误配置<span>1</span></a></li>
		
			<li><a href="/tags/tree/">tree<span>1</span></a></li>
		
			<li><a href="/tags/distributed-system/">distributed-system<span>2</span></a></li>
		
			<li><a href="/tags/mathcs/">mathcs<span>1</span></a></li>
		
			<li><a href="/tags/timestamp/">timestamp<span>1</span></a></li>
		
			<li><a href="/tags/svm/">svm<span>1</span></a></li>
		
			<li><a href="/tags/Scheduler/">Scheduler<span>1</span></a></li>
		
			<li><a href="/tags/gfw/">gfw<span>2</span></a></li>
		
			<li><a href="/tags/gcj/">gcj<span>1</span></a></li>
		
			<li><a href="/tags/rpm/">rpm<span>1</span></a></li>
		
			<li><a href="/tags/Spark/">Spark<span>1</span></a></li>
		
			<li><a href="/tags/vim/">vim<span>2</span></a></li>
		
			<li><a href="/tags/bfs/">bfs<span>1</span></a></li>
		
			<li><a href="/tags/implicit-declaration/">implicit-declaration<span>1</span></a></li>
		
			<li><a href="/tags/version-control/">version-control<span>0</span></a></li>
		
			<li><a href="/tags/computer-scientist/">computer-scientist<span>1</span></a></li>
		
			<li><a href="/tags/lzo/">lzo<span>1</span></a></li>
		
			<li><a href="/tags/ndbm/">ndbm<span>1</span></a></li>
		
		
		   <li><a href="/tags">...<span>304</span></a></li>
		 
		</ul>
	</div>


		
			
<div class="widget">
  <h4>Recent Posts</h4>
  <ul class="entry list-unstyled">
    
      <li>
        <a href="/2018/03/14/Java-内存泄漏分析和对内存设置/" ><i class="fa fa-file-o"></i>Java 内存泄漏分析和对内存设置</a>
      </li>
    
      <li>
        <a href="/2018/02/28/通过-Java-线程堆栈进行性能瓶颈分析/" ><i class="fa fa-file-o"></i>通过 Java 线程堆栈进行性能瓶颈分析</a>
      </li>
    
      <li>
        <a href="/2018/01/06/线程堆栈分析/" ><i class="fa fa-file-o"></i>线程堆栈分析</a>
      </li>
    
      <li>
        <a href="/2017/12/22/millwheel/" ><i class="fa fa-file-o"></i>millwheel</a>
      </li>
    
      <li>
        <a href="/2017/12/03/tasksetmanager/" ><i class="fa fa-file-o"></i>tasksetmanager</a>
      </li>
    
  </ul>
</div>

		
			
<div class="widget">
	<h4>Links</h4>
	<ul class="blogroll list-unstyled">
	
		<li><i class="fa fa-github"></i><a href="http://www.github.com/klion26" title="My Github account." target="_blank"]);">My Github</a></li>
	
		<li><i class=""></i><a href="http://l34rner.github.io/" title="A blog focus on security!" target="_blank"]);">Debug0</a></li>
	
		<li><i class=""></i><a href="http://www.programlife.net/" title="程序人生" target="_blank"]);">代码疯子</a></li>
	
		<li><i class=""></i><a href="http://www.narutoacm.com/" title="NARUTOACM" target="_blank"]);">NARUTOACM</a></li>
	
		<li><i class=""></i><a href="http://www.tanglei.name/" title="tanglei 的 blog" target="_blank"]);">tanglei的blog</a></li>
	
		<li><i class=""></i><a href="http://www.microspaze.com/" title="微空间" target="_blank"]);">微空间</a></li>
	
		<li><i class=""></i><a href="http://www.toutian.org/" title="小昭的荒地" target="_blank"]);">小昭的荒地</a></li>
	
		<li><i class=""></i><a href="https://cosx.me/" title="异想天开" target="_blank"]);">异想天开</a></li>
	
		<li><i class=""></i><a href="http://www.xpc-yx.com/" title="远行" target="_blank"]);">远行</a></li>
	
		<li><i class=""></i><a href="http://www.zhangxc.com/" title="张学程" target="_blank"]);">张学程</a></li>
	
	</ul>
</div>


		
			<!-- calendar widget -->

  <script src="/js/calendar.js"></script>
  <script src="/js/languages.js"></script>
  <script type="text/javascript">
    $(function() {
    
      $('#calendar').aCalendar('zh-CN',{single:undefined, root:'undefined'});
    
    });
  </script>


<div class="widget-wrap">
  <h3 class="widget-title">日历云</h3>
  <div class="widget">
    <div id="calendar"></div>
  </div>
</div
		
	</div> <!-- sidebar -->
</div> <!-- col-md-3 -->

	
	
</div> <!-- row-fluid -->


	</div>
  </div>
  <div class="container-narrow">
  <footer> <p>
  &copy; 2018 klion26
  
      with help from <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme by <a href="http://github.com/wzpan/hexo-theme-freemind/">Freemind</a>.    
</p> </footer>
</div> <!-- container-narrow -->
  


  
<a id="gotop" href="#">   
  <span>▲</span> 
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
<script src="/js/search.js"></script> 


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>



   <script type="text/javascript">      
     var search_path = "search.xml";
	 if (search_path.length == 0) {
	 	search_path = "search.xml";
	 }
	 var path = "/" + search_path;
     searchFunc(path, 'local-search-input', 'local-search-result');
   </script>

</body>
   </html>
